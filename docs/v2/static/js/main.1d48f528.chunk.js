(this.webpackJsonprhm=this.webpackJsonprhm||[]).push([[0],{259:function(e,n,t){},453:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),c=t(35),a=t.n(c),o=t(11),d=t(16),s=(t(258),t(259),t(463)),u=t(455),l=t(456),j=t(458),x=t(466),f=t(467),b=t(462),O=t(60),h=t(474),v=t(251),m=t(43),p=t(7),I=t(249),g=t(173),L=t(71),k=t(250),C=t(468),y=t(457),w=t(459),P=t(461),F=t(62),N="afterChange",S="afterChangeNew",V="alias",E="aliasNew",q="beforeChange",z="beforeChangeNew",R="customerIndexList",A="description",T="descriptionNew",H="lineup",B="lineupNew",D="name",J="nameNew",K="previous",W="previousNew",G="version",U="invalidSortable",M="actions",_="afterChange",Q="alias",X="beforeChange",Y="changes",Z="customers",$="description",ee="dragHandle",ne="history",te="lineup",ie="name",re="package",ce="previous",ae="releases",oe="version",de="versions",se="(Global)",ue="(None)",le="(Error)",je="Actions",xe="After change",fe="Alias",be="Before change",Oe="Customers",he="Description",ve="Lineup",me="Package",pe="Previous",Ie="Version",ge=t(76);function Le(e,n){var t=[],i=e.find((function(e){return e.index===n}));if(!i)return t;t.push(n);var r=i.indexPrev;return t.push.apply(t,Object(o.a)(Le(e,r))),t}function ke(e){return e.sort((function(e,n){return e-n})).reduce((function(e,n){return n===e?e+1:e}),0)}function Ce(e){return e.replace(/^/gm,"    ")}function ye(e,n,t,i,r){var c=[-1].concat(Object(o.a)(t.map((function(e){return e.index})))),a=[];return c.forEach((function(t){a.push({lineupIndex:t,releaseHistory:we(e,n,t,i,r)})})),a.filter((function(e){return e.releaseHistory})).map((function(e){var n=e.lineupIndex,i=e.releaseHistory,r=t.find((function(e){return e.index===n}));if(r){var c=r.name;return"<".concat(c,">\n").concat(Ce(i),"\n</").concat(c,">")}return Ce(i)})).join("\n")}function we(e,n,t,i,r){return function(e,n,t,i,r){console.group({customerIndex:e});for(var c=[],a=n.find((function(e){return e.index===t})),d="",s=[],u=!0,l=function(){console.group({versionNext:a});var t=a,l=t.indexPrev,j=t.releaseList;if(u){var x=j.find((function(n){var t=n.pkgIndex;return!!n.customerIndexList.includes(e)&&!!r.find((function(e){return e.index===t&&e.lineupIndex===i}))}));if(u=!1,!x)return console.groupEnd(),console.groupEnd(),{v:c}}for(var f=function(t){var a,u=j[t],l=u.customerIndexList,x=u.customerIndexListPerChangeList,f=u.pkgIndex,b=r.find((function(e){return e.index===f}));console.log({customerIndexList:l});var O=-1!==l.findIndex((function(n){return n===e}));if((null===b||void 0===b?void 0:b.lineupIndex)!==i)return"continue";if(O){var h;d&&(console.log("Pushed",d,s),c.unshift({pkgName:d,changeList:Object(o.a)(s)}),s=[]);var v=b.name,m=b.alias;d=null!==(h=m||v)&&void 0!==h?h:""}var p=x.filter((function(n){var t=n.customerIndexList;return t.includes(e)||t.includes(-1)})),I=n.map((function(e){return e.changeList.filter((function(n){return p.find((function(t){return t.versionIndex===e.index&&t.changeIndex===n.index}))}))})).flat();(a=s).unshift.apply(a,Object(o.a)(I)),console.log({changeListToAccumulate:s})},b=j.length-1;b>=0;b-=1)f(b);a=n.find((function(e){return e.index===l})),console.groupEnd()};a;){var j=l();if("object"===typeof j)return j.v}return d&&(console.log("Pushed",d,s),c.unshift({pkgName:d,changeList:Object(o.a)(s)})),console.groupEnd(),c}(r.index,e,n,t,i).map((function(e,n){var t=e.pkgName,i=e.changeList,r=0===n?"- Initial release":i.map((function(e){var n=e.description,t=e.beforeChange,i=e.afterChange,r=["[Description]",Ce(n)];return(t||i)&&r.push("[Enhancement]"),t&&(r.push(Ce("[Before change]")),r.push(Ce(Ce(t)))),i&&(r.push(Ce("[After change]")),r.push(Ce(Ce(i)))),r.join("\n")})).join("\n");return r?"".concat(t,"\n").concat(Ce(r)):""})).filter((function(e){return!!e})).join("\n").trim()}var Pe=t(1);function Fe(e){var n=e.title,t=e.enumList,r=e.onChange,c=e.usedIndexList,a=Object(F.useForm)(),s=Object(d.a)(a,1)[0],u=Object(i.createRef)(),l=Object(i.createRef)(),j=Object(i.useState)(-1),x=Object(d.a)(j,2),f=x[0],b=x[1],h=[{key:ie,dataIndex:ie,title:n},{key:M,dataIndex:M,title:je}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function v(){s.validateFields([D]).then((function(){var e=s.getFieldValue(D);if(!t.find((function(n){return n.name===e}))){var n=ke(t.map((function(e){return e.index}))),i=[].concat(Object(o.a)(t),[{index:n,name:e}]).sort((function(e,n){return e.name.localeCompare(n.name)}));r(i),s.setFieldsValue({name:""})}})).catch((function(e){console.error(e)}))}function N(){s.validateFields([J]).then((function(){var e=s.getFieldValue(J);if(!t.find((function(n){return n.index!==f&&n.name===e}))){var n=t.findIndex((function(e){return e.index===f}));if(-1!==n){var i=[].concat(Object(o.a)(t.slice(0,n)),[{index:f,name:e}],Object(o.a)(t.slice(n+1)));r(i),b(-1)}}})).catch((function(e){console.error(e)}))}var S=[{key:-1}].concat(Object(o.a)(t.map((function(e){return{key:e.index,name:e.name}}))));return Object(Pe.jsx)(y.a,{columns:h,dataSource:S,components:{body:{cell:function(e){var n=e.record,i=e.dataIndex,a=e.children,d=Object(m.a)(e,["record","dataIndex","children"]),j=n.key;return Object(Pe.jsx)("td",Object(p.a)(Object(p.a)({},d),{},{children:-1===j&&i===ie?Object(Pe.jsx)(w.a,{form:s,onFinish:v,children:Object(Pe.jsx)(w.a.Item,{name:D,rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(P.a,{onPressEnter:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.click()},disabled:-1!==f})})}):-1===j&&i===M?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{children:Object(Pe.jsx)(O.a,{ref:u,onClick:v,disabled:-1!==f,children:Object(Pe.jsx)(I.a,{})})})}):f===j&&i===ie?Object(Pe.jsx)(w.a,{form:s,onFinish:N,children:Object(Pe.jsx)(w.a.Item,{name:J,rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(P.a,{onPressEnter:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.click()}})})}):f===j&&i===M?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsxs)(w.a.Item,{children:[Object(Pe.jsx)(O.a,{ref:l,onClick:N,children:Object(Pe.jsx)(g.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return b(-1)},children:Object(Pe.jsx)(L.a,{})})]})}):i===ie?a:i===M?Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(O.a,{onClick:function(){return function(e){var n=t.find((function(n){return n.index===e}));n&&(s.setFieldsValue({nameNew:n.name}),b(e))}(j)},children:Object(Pe.jsx)(k.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return function(e){if(!c||!c.includes(e)){var n=t.findIndex((function(n){return n.index===e}));if(-1!==n){var i=[].concat(Object(o.a)(t.slice(0,n)),Object(o.a)(t.slice(n+1)));r(i)}}}(j)},disabled:null===c||void 0===c?void 0:c.includes(j),children:Object(Pe.jsx)(C.a,{})})]}):null}))}}},pagination:!1,size:"small"})}var Ne=t(133),Se=Ne.a.Option;function Ve(e){var n=e.pkgList,t=e.lineupList,r=e.onChange,c=e.usedPkgIndexList,a=Object(F.useForm)(),s=Object(d.a)(a,1)[0],u=Object(i.createRef)(),l=Object(i.createRef)(),j=Object(i.useState)(-1),x=Object(d.a)(j,2),f=x[0],b=x[1];Object(i.useEffect)((function(){b(-1)}),[t]);var h=[{key:re,dataIndex:re,title:me},{key:Q,dataIndex:Q,title:fe},{key:te,dataIndex:te,title:ve},{key:M,dataIndex:M,title:je}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function v(){s.validateFields([D,V,H]).then((function(){var e=s.getFieldsValue([D,V,H]),t=e.name,i=e.alias,c=e.lineup;if(!n.find((function(e){return e.name===t}))){var a=ke(n.map((function(e){return e.index}))),d=[].concat(Object(o.a)(n),[{index:a,name:t,alias:i,lineupIndex:c}]).sort((function(e,n){return e.name.localeCompare(n.name)}));r(d),s.setFieldsValue({name:"",alias:"",lineup:-1})}})).catch((function(e){console.error(e)}))}function N(){s.validateFields([J]).then((function(){var e=s.getFieldsValue([J,E,B]),t=e.nameNew,i=e.aliasNew,c=e.lineupNew;if(!n.find((function(e){return e.index!==f&&e.name===t}))){var a=n.findIndex((function(e){return e.index===f}));if(-1!==a){var d=[].concat(Object(o.a)(n.slice(0,a)),[{index:f,name:t,alias:i,lineupIndex:c}],Object(o.a)(n.slice(a+1)));r(d),b(-1)}}})).catch((function(e){console.error(e)}))}var S=[{key:-1}].concat(Object(o.a)(n.map((function(e){return{key:e.index,package:e.name,alias:e.alias,lineup:e.lineupIndex}}))));return Object(Pe.jsx)(y.a,{columns:h,dataSource:S,components:{body:{cell:function(e){var i,a,d=e.record,j=e.dataIndex,x=e.children,h=Object(m.a)(e,["record","dataIndex","children"]),y=d.key,F=d.lineup;return Object(Pe.jsx)("td",Object(p.a)(Object(p.a)({},h),{},{children:-1===y&&j===re?Object(Pe.jsx)(w.a,{form:s,onFinish:v,children:Object(Pe.jsx)(w.a.Item,{name:D,rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(P.a,{onPressEnter:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.click()},disabled:-1!==f})})}):-1===y&&j===Q?Object(Pe.jsx)(w.a,{form:s,onFinish:v,children:Object(Pe.jsx)(w.a.Item,{name:V,help:!1,children:Object(Pe.jsx)(P.a,{onPressEnter:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.click()},disabled:-1!==f})})}):-1===y&&j===te?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{name:H,initialValue:-1,children:Object(Pe.jsxs)(Ne.a,{disabled:-1!==f,children:[Object(Pe.jsx)(Se,{value:-1,children:ue},-1),t.map((function(e){var n=e.index,t=e.name;return Object(Pe.jsx)(Se,{value:n,children:t},n)}))]})})}):-1===y&&j===M?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{children:Object(Pe.jsx)(O.a,{ref:u,onClick:v,disabled:-1!==f,children:Object(Pe.jsx)(I.a,{})})})}):f===y&&j===re?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{name:J,rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(P.a,{onPressEnter:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.click()}})})}):f===y&&j===Q?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{name:E,help:!1,children:Object(Pe.jsx)(P.a,{onPressEnter:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.click()}})})}):f===y&&j===te?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{name:B,children:Object(Pe.jsxs)(Ne.a,{children:[Object(Pe.jsx)(Se,{value:-1,children:ue},-1),t.map((function(e){var n=e.index,t=e.name;return Object(Pe.jsx)(Se,{value:n,children:t},n)}))]})})}):f===y&&j===M?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsxs)(w.a.Item,{children:[Object(Pe.jsx)(O.a,{ref:l,onClick:N,icon:Object(Pe.jsx)(g.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return b(-1)},icon:Object(Pe.jsx)(L.a,{})})]})}):j===re||j===Q?x:j===te?-1===F?ue:null!==(i=null===(a=t.find((function(e){return e.index===F})))||void 0===a?void 0:a.name)&&void 0!==i?i:le:j===M?Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(O.a,{onClick:function(){return function(e){var t=n.find((function(n){return n.index===e}));if(t){var i=t.name,r=t.alias,c=t.lineupIndex;s.setFieldsValue({nameNew:i,aliasNew:r,lineupNew:c}),b(e)}}(y)},icon:Object(Pe.jsx)(k.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return function(e){if(!c||!c.includes(e)){var t=n.findIndex((function(n){return n.index===e}));if(-1!==t){var i=[].concat(Object(o.a)(n.slice(0,t)),Object(o.a)(n.slice(t+1)));r(i)}}}(y)},disabled:null===c||void 0===c?void 0:c.includes(y),icon:Object(Pe.jsx)(C.a,{})})]}):null}))}}},pagination:!1,size:"small"})}var Ee=t(98),qe=t.n(Ee),ze=t(168),Re=t.n(ze),Ae=t(469),Te=Ne.a.Option;function He(e){var n=e.versionList,t=e.onChange,r=e.onPublish,c=e.onSelect,a=Object(F.useForm)(),s=Object(d.a)(a,1)[0],u=Object(i.createRef)(),l=Object(i.createRef)(),j=Object(i.useState)(-1),x=Object(d.a)(j,2),f=x[0],b=x[1],h=[{key:oe,dataIndex:oe,title:Ie},{key:ce,dataIndex:ce,title:pe},{key:M,dataIndex:M,title:je}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function v(){s.validateFields([G]).then((function(){var e=s.getFieldsValue([G,K]),i=e.version,r=e.previous;if(!n.find((function(e){return e.name===i}))){var c=ke(n.map((function(e){return e.index}))),a=[].concat(Object(o.a)(n),[{index:c,name:i,indexPrev:r,changeList:[],releaseList:[]}]);s.setFieldsValue({version:""}),t(a)}})).catch((function(e){console.error(e)}))}function N(){s.validateFields([J]).then((function(){var e=s.getFieldsValue([J,W]),i=e.nameNew,r=e.previousNew;if(!n.find((function(e){return e.index!==f&&e.name===i}))){var c=n.findIndex((function(e){return e.index===f}));if(-1!==c){var a=n[c],d=a.changeList,u=a.releaseList,l=[].concat(Object(o.a)(n.slice(0,c)),[{index:f,name:i,indexPrev:r,changeList:d,releaseList:u}],Object(o.a)(n.slice(c+1)));t(l),b(-1)}}})).catch((function(e){console.error(e)}))}var S=Object(ge.uniq)(n.filter((function(e){var t=e.index;return!!n.find((function(e){return e.indexPrev===t}))})).map((function(e){return e.index}))),V=[{key:-1}].concat(Object(o.a)(n.map((function(e){return{key:e.index,version:e.name,previous:e.indexPrev}}))));return Object(Pe.jsx)(y.a,{columns:h,dataSource:V,components:{body:{cell:function(e){var i,a,d=e.record,j=e.dataIndex,x=e.children,h=Object(m.a)(e,["record","dataIndex","children"]),y=d.key,F=d.previous;return Object(Pe.jsx)("td",Object(p.a)(Object(p.a)({},h),{},{children:-1===y&&j===oe?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{name:G,rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(P.a,{onPressEnter:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.click()},disabled:-1!==f})})}):-1===y&&j===ce?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{name:K,initialValue:-1,children:Object(Pe.jsxs)(Ne.a,{disabled:-1!==f,children:[Object(Pe.jsx)(Te,{value:-1,children:ue},-1),n.map((function(e){var n=e.index,t=e.name;return Object(Pe.jsx)(Te,{value:n,children:t},n)}))]})})}):-1===y&&j===M?Object(Pe.jsx)(w.a,{children:Object(Pe.jsx)(w.a.Item,{children:Object(Pe.jsx)(O.a,{ref:u,onClick:v,disabled:-1!==f,icon:Object(Pe.jsx)(I.a,{})})})}):f===y&&j===oe?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{name:J,rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(P.a,{onPressEnter:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.click()}})})}):f===y&&j===ce?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsx)(w.a.Item,{name:W,children:Object(Pe.jsxs)(Ne.a,{children:[Object(Pe.jsx)(Te,{value:-1,children:ue},-1),n.map((function(e){var n=e.index,t=e.name;return Object(Pe.jsx)(Te,{value:n,disabled:n===y,children:t},n)}))]})})}):f===y&&j===M?Object(Pe.jsx)(w.a,{form:s,children:Object(Pe.jsxs)(w.a.Item,{children:[Object(Pe.jsx)(O.a,{ref:l,onClick:N,icon:Object(Pe.jsx)(g.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return b(-1)},icon:Object(Pe.jsx)(L.a,{})})]})}):j===oe?Object(Pe.jsx)(Re.a,{onClick:function(){return c(y)},children:x}):j===ce?-1===F?ue:null!==(i=null===(a=n.find((function(e){return e.index===F})))||void 0===a?void 0:a.name)&&void 0!==i?i:le:j===M?Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(O.a,{onClick:function(){return function(e){var t=n.find((function(n){return n.index===e}));if(t){var i=t.name,r=t.indexPrev;s.setFieldsValue({nameNew:i,previousNew:r}),b(e)}}(y)},icon:Object(Pe.jsx)(k.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return function(e){if(!n.find((function(n){return n.indexPrev===e}))){var i=n.findIndex((function(n){return n.index===e}));if(-1!==i){var r=[].concat(Object(o.a)(n.slice(0,i)),Object(o.a)(n.slice(i+1,0)));t(r)}}}(y)},disabled:S.includes(y),icon:Object(Pe.jsx)(C.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return function(e){r(e)}(y)},icon:Object(Pe.jsx)(Ae.a,{})})]}):x}))}}},pagination:!1,size:"small"})}var Be=t(470),De=t(471),Je=t(472),Ke=t(97);function We(e){var n,t=e.customerList,r=e.lineupList,c=e.pkgList,a=e.versionList,s=e.onNew,u=e.onLoad,l=Object(i.createRef)(),j=Object(i.createRef)(),x=Object(i.useState)("Untitled"),f=Object(d.a)(x,2),b=f[0],O=f[1];var h=new FileReader;return h.onload=function(e){var t;if(n){var i=null===(t=e.target)||void 0===t?void 0:t.result;if("string"===typeof i){var r=n.name,c=r.lastIndexOf("."),a=r.substring(0,c),d=function(e){var n=JSON.parse(e),t=n.versionList,i=n.lineupList,r=n.pkgList,c=n.customerList;return t[0]&&void 0!==t[0].versionIndex?{versionList:t.map((function(e){var n=e.versionIndex,t=e.versionName,i=e.versionIndexPrev,r=e.changeList,c=e.releaseList;return{index:n,name:t,indexPrev:i,changeList:r.map((function(e){return{index:e.changeIndex,description:e.description,beforeChange:e.beforeChange,afterChange:e.afterChange,customerIndexList:e.targetCustomerList.map((function(e){return e.customerIndex})),lineupIndex:-1}})),releaseList:c.map((function(e){return{index:e.releaseIndex,pkgIndex:e.pkgIndex,customerIndexList:e.targetCustomerList.map((function(e){return e.customerIndex}))}}))}})),lineupList:[],pkgList:r.map((function(e){return{index:e.pkgIndex,name:e.pkgName,lineupIndex:-1}})),customerList:c.map((function(e){return{index:e.customerIndex,name:e.customerName}}))}:(t.forEach((function(e){var n=e.index,t=e.changeList,i=e.releaseList;i.forEach((function(e){var n;e.customerIndexListPerChangeList=null!==(n=e.customerIndexListPerChangeList)&&void 0!==n?n:[]})),t.forEach((function(e){var t=e.index,c=e.customerIndexList;if(c&&c.length)c.forEach((function(c){var a=i.find((function(n){var t=n.pkgIndex;return r.find((function(i){return i.index===t&&i.lineupIndex===e.lineupIndex&&n.customerIndexList.includes(c)}))}));if(a){var d=a.customerIndexListPerChangeList,s=d.find((function(e){return e.versionIndex===n&&e.changeIndex===t}));s?s.customerIndexList=Object(ge.uniq)([].concat(Object(o.a)(s.customerIndexList),[c])):d.push({versionIndex:n,changeIndex:t,customerIndexList:[c]})}}));else if(c&&!c.length){var a=i.find((function(n){var t=n.pkgIndex;return r.find((function(n){return n.index===t&&n.lineupIndex===e.lineupIndex}))}));if(a){var d=a.customerIndexListPerChangeList,s=d.find((function(e){return e.versionIndex===n&&e.changeIndex===t}));s?s.customerIndexList=[-1]:d.push({versionIndex:n,changeIndex:t,customerIndexList:[-1]})}}}))})),{versionList:t,lineupList:i,pkgList:r,customerList:c})}(i),s=d.versionList,l=d.lineupList,j=d.pkgList,x=d.customerList;O(a),u({customerList:x,lineupList:l,pkgList:j,versionList:s})}}},Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsxs)(Ke.a,{mode:"horizontal",selectable:!1,children:[Object(Pe.jsx)(Ke.a.Item,{onClick:s,icon:Object(Pe.jsx)(Be.a,{})},"new"),Object(Pe.jsx)(Ke.a.Item,{onClick:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.click()},icon:Object(Pe.jsx)(De.a,{})},"load"),Object(Pe.jsx)(Ke.a.Item,{disabled:!0,children:Object(Pe.jsx)(P.a,{value:b,onChange:function(e){return O(e.target.value)}})},"featureName"),Object(Pe.jsx)(Ke.a.Item,{onClick:function(){return function(){if(null!==j.current){var e=new Blob([JSON.stringify({versionList:a,lineupList:r,pkgList:c,customerList:t})],{type:"application/json"});j.current.download="".concat(b,".json"),j.current.href=window.URL.createObjectURL(e),j.current.click()}}()},icon:Object(Pe.jsx)(Je.a,{})},"save")]}),Object(Pe.jsx)("input",{type:"file",accept:".json",hidden:!0,ref:l,onChange:function(e){var t;(n=null===(t=e.target.files)||void 0===t?void 0:t[0])&&h.readAsText(n)}}),Object(Pe.jsx)("a",{href:"#",ref:j,hidden:!0})]})}var Ge=t(473),Ue=t(36),Me=t(118),_e=t(460),Qe=t(464),Xe=t(465),Ye=t(55),Ze=t.n(Ye),$e=Ne.a.Option,en=_e.a.Text;function nn(e){var n,t,r,c,a=e.customerList,s=e.pkgList,u=e.releaseIndex,l=e.versionIndex,j=e.versionList,f=e.onChange,b=Object(F.useForm)(),h=Object(d.a)(b,1)[0],v=Object(i.useState)(-1),I=Object(d.a)(v,2),C=I[0],P=I[1],N=Object(i.useState)(-1),S=Object(d.a)(N,2),V=S[0],E=S[1];Object(i.useEffect)((function(){P(-1),E(-1)}),[a,s,u,l,j]);var q=j.find((function(e){return e.index===l})),z=(null!==(n=null===q||void 0===q?void 0:q.releaseList)&&void 0!==n?n:[]).find((function(e){return e.index===u})),A=null!==(t=null===z||void 0===z?void 0:z.customerIndexListPerChangeList)&&void 0!==t?t:[],T=null!==(r=null===z||void 0===z?void 0:z.pkgIndex)&&void 0!==r?r:void 0,H=[{key:oe,dataIndex:oe,title:Ie},{key:$,dataIndex:$,title:he},{key:Z,dataIndex:Z,title:Oe},{key:M,dataIndex:M,title:je}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function B(){P(-1),E(-1)}var D=Le(j,l),J=s.find((function(e){return e.index===T})),K=D.reduce((function(e,n){var t=j.find((function(e){return e.index===n}));if(!t)return e;var i=t.changeList.filter((function(e){return e.lineupIndex===(null===J||void 0===J?void 0:J.lineupIndex)}));return[].concat(Object(o.a)(e),Object(o.a)(i.map((function(e){return Object(p.a)({versionIndex:n},e)}))))}),[]),W=Object(o.a)(K.map((function(e){var n,t,i=e.index,r=e.description,c=e.beforeChange,a=e.afterChange,o=e.versionIndex,d=null!==(n=null===(t=A.find((function(e){return e.versionIndex===o&&e.changeIndex===i})))||void 0===t?void 0:t.customerIndexList)&&void 0!==n?n:[];return{changeIndex:i,description:r,beforeChange:c,afterChange:a,version:o,customerIndexList:d}}))),G=null!==(c=null===z||void 0===z?void 0:z.customerIndexList)&&void 0!==c?c:[],U=a.filter((function(e){return G.includes(e.index)}));return Object(Pe.jsx)(y.a,{columns:H,dataSource:W,components:{body:{cell:function(e){var n,t=e.record,i=e.dataIndex,r=e.children,c=Object(m.a)(e,["record","dataIndex","children"]);if(!t)return Object(Pe.jsx)("td",Object(p.a)(Object(p.a)({colSpan:H.length},c),{},{children:r}));var d=t.changeIndex,s=t.beforeChange,u=t.afterChange,b=t.version,v=t.customerIndexList,I=j.find((function(e){return e.index===b}));return Object(Pe.jsx)("td",Object(p.a)(Object(p.a)({},c),{},{children:C===b&&V===d&&i===Z?Object(Pe.jsx)(w.a,{form:h,children:Object(Pe.jsx)(w.a.Item,{name:R,help:!1,children:Object(Pe.jsxs)(Ne.a,{mode:"multiple",allowClear:!0,filterOption:function(e,n){if(!n)return!1;var t=n.children;return!!t&&-1!==t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())},children:[Object(Pe.jsx)($e,{value:-1,children:se},-1),U.map((function(e){var n=e.index,t=e.name;return Object(Pe.jsx)($e,{value:n,children:t},n)}))]})})}):C===b&&V===d&&i===M?Object(Pe.jsx)(w.a,{form:h,children:Object(Pe.jsxs)(w.a.Item,{children:[Object(Pe.jsx)(O.a,{onClick:function(){return function(e,n){var t=j.find((function(n){return n.index===e}));if(t&&t.changeList.find((function(e){return e.index===n}))&&z){var i=h.getFieldValue(R),r=i.includes(-1)?[-1]:i,c=z.customerIndexListPerChangeList,a=c.findIndex((function(t){return t.versionIndex===e&&t.changeIndex===n})),d=-1===a?[].concat(Object(o.a)(c),[{versionIndex:e,changeIndex:n,customerIndexList:r}]):[].concat(Object(o.a)(c.slice(0,a)),[{versionIndex:e,changeIndex:n,customerIndexList:r}],Object(o.a)(c.slice(a+1)));f(d)}}(b,d)},icon:Object(Pe.jsx)(g.a,{})}),Object(Pe.jsx)(O.a,{onClick:B,icon:Object(Pe.jsx)(L.a,{})})]})}):i===oe?Object(Pe.jsxs)(Pe.Fragment,{children:[null!==(n=null===I||void 0===I?void 0:I.name)&&void 0!==n?n:le," ",b===l?Object(Pe.jsx)(Qe.a,{color:"blue"}):null]}):i===$?Object(Pe.jsx)(Xe.a,{content:function(){return Object(Pe.jsx)(_,{beforeChange:s,afterChange:u})},children:r}):i===Z?v.map((function(e){var n,t=-1===e?{name:se}:a.find((function(n){return n.index===e}));return Object(Pe.jsx)(x.a,{color:"blue",children:null!==(n=null===t||void 0===t?void 0:t.name)&&void 0!==n?n:le},e)})):i===M?Object(Pe.jsx)(O.a,{onClick:function(){return function(e,n){var t=A.find((function(t){return t.versionIndex===e&&t.changeIndex===n}));if(t){var i=t.customerIndexList;h.setFieldsValue({customerIndexList:i})}P(e),E(n)}(b,d)},icon:Object(Pe.jsx)(k.a,{})}):r}))}}},pagination:!1,size:"small"});function _(e){var n=e.beforeChange,t=e.afterChange;return Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(en,{strong:!0,children:"Before change"}),Object(Pe.jsx)("br",{}),Object(Pe.jsx)(Ze.a,{value:n,cols:80,autoSize:!0}),Object(Pe.jsx)("br",{}),Object(Pe.jsx)(en,{strong:!0,children:"After change"}),Object(Pe.jsx)("br",{}),Object(Pe.jsx)(Ze.a,{value:t,cols:80,autoSize:!0})]})}}var tn=Ne.a.Option;function rn(e){var n,t,r=e.lineupList,c=e.pkgList,a=e.customerList,s=e.usedPkgIndexList,u=e.versionList,l=e.versionIndex,j=e.onChange,f=Object(F.useForm)(),b=Object(d.a)(f,1)[0],h=Object(i.useState)(-1),v=Object(d.a)(h,2),P=v[0],N=v[1],S=Object(i.useState)(null),V=Object(d.a)(S,2),E=V[0],q=V[1],z=Object(Ue.o)(Object(Ue.n)(Ue.e),Object(Ue.n)(Ue.d,{coordinateGetter:Me.c}));Object(i.useEffect)((function(){N(-1)}),[r,c,a,u,l]);var R=u.find((function(e){return e.index===l})),A=null!==(n=null===R||void 0===R?void 0:R.releaseList)&&void 0!==n?n:[],T=[{key:re,dataIndex:re,title:me},{key:Z,dataIndex:Z,title:Oe,width:"50%"},{key:M,dataIndex:M,title:je},{key:ee,dataIndex:ee,title:""}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function H(){b.validateFields(["pkgIndex","customerList"]).then((function(){var e=b.getFieldsValue(["pkgIndex","customerList"]),n=e.pkgIndex,t=e.customerList;if(-1!==n&&!u.find((function(e){return e.releaseList.find((function(e){return e.pkgIndex===n}))}))){var i=ke(A.map((function(e){return e.index}))),r=[].concat(Object(o.a)(A),[{index:i,pkgIndex:n,customerIndexList:t,customerIndexListPerChangeList:[]}]);j(r)}})).catch((function(e){console.error(e)}))}function B(e,n){var t=A.findIndex((function(n){return n.index===e}));if(-1!==t){var i=A[t],r=i.index,c=i.pkgIndex,a=i.customerIndexList,d=[].concat(Object(o.a)(A.slice(0,t)),[{index:r,pkgIndex:c,customerIndexList:a,customerIndexListPerChangeList:n}],Object(o.a)(A.slice(t+1)));j(d)}}function D(){b.validateFields(["pkgIndexNew","customerIndexListNew"]).then((function(){var e=b.getFieldsValue(["pkgIndexNew","customerIndexListNew"]),n=e.pkgIndexNew,t=e.customerIndexListNew;if(!A.find((function(e){return e.index!==P&&e.pkgIndex===n}))){var i=A.findIndex((function(e){return e.index===P})),r=A[i].customerIndexListPerChangeList;if(-1!==i){var c=[].concat(Object(o.a)(A.slice(0,i)),[{index:P,pkgIndex:n,customerIndexList:t,customerIndexListPerChangeList:r}],Object(o.a)(A.slice(i+1)));j(c),N(-1)}}})).catch((function(e){console.error(e)}))}var J=[{key:-1}].concat(Object(o.a)(A.map((function(e){var n,t,i=e.index,a=e.pkgIndex,o=e.customerIndexList,d=c.find((function(e){return e.index===a})),s=null===d||void 0===d?void 0:d.name,u=null===d||void 0===d?void 0:d.lineupIndex,l=-1===u?ue:null!==(n=null===(t=r.find((function(e){return e.index===u})))||void 0===t?void 0:t.name)&&void 0!==n?n:le;return{key:i,package:a,pkgName:s,customers:o,lineup:l}})))),K=A.find((function(e){return e.index===Number(E)})),W=c.find((function(e){return e.index===(null===K||void 0===K?void 0:K.pkgIndex)})),G=null===W||void 0===W?void 0:W.name,_=null===W||void 0===W?void 0:W.lineupIndex,Q=null===(t=r.find((function(e){return e.index===_})))||void 0===t?void 0:t.name;return Object(Pe.jsxs)(Ue.a,{sensors:z,collisionDetection:Ue.f,onDragStart:function(e){var n=e.active;q(n.id)},onDragEnd:function(e){var n=e.active,t=e.over;if("-1"!==n.id&&"-1"!==t.id&&n.id!==t.id){var i=A.findIndex((function(e){return e.index.toString()===n.id})),r=A.findIndex((function(e){return e.index.toString()===t.id})),c=Object(Me.b)(A,i,r);j(c)}q(null)},children:[Object(Pe.jsx)(y.a,{columns:T,dataSource:J,components:{body:{wrapper:function(e){var n=e.children,t=Object(m.a)(e,["children"]);return Object(Pe.jsx)(Me.a,Object(p.a)(Object(p.a)({items:n[1].map((function(e){return e.key.toString()})),strategy:Me.e},t),{},{children:Object(Pe.jsx)("tbody",Object(p.a)(Object(p.a)({},t),{},{children:n}))}))},row:function(e){var n,t,i=e.children,r=e.style,c=Object(m.a)(e,["children","style"]),a=null!==(n=null===(t=e["data-row-key"])||void 0===t?void 0:t.toString())&&void 0!==n?n:U,o=Object(Me.d)({id:a}),d=o.attributes,s=o.listeners,u=o.setNodeRef,l=Number(a)>-1?{fontWeight:"bold"}:null,j=Object.assign({},r,l);return Object(Pe.jsx)("tr",Object(p.a)(Object(p.a)(Object(p.a)({ref:u},d),c),{},{style:j,children:a===U?i:i.map((function(e){e.children;var n=Object(m.a)(e,["children"]);return n.key===ee?Object(Pe.jsx)("td",Object(p.a)(Object(p.a)(Object(p.a)({},s),n),{},{children:e})):Object(Pe.jsx)("td",Object(p.a)(Object(p.a)({},n),{},{children:e}))}))}))},cell:function(e){var n=e.record,t=e.dataIndex,i=e.children;Object(m.a)(e,["record","dataIndex","children"]);if(!n)return i;var d=n.key,u=n.pkgName,l=n.customers,f=n.lineup;return Object(Pe.jsx)(Pe.Fragment,{children:-1===d&&t===re?Object(Pe.jsx)(w.a,{form:b,children:Object(Pe.jsx)(w.a.Item,{name:"pkgIndex",rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(Ne.a,{disabled:-1!==P,children:c.map((function(e){var n,t,i=e.index,c=e.name,a=e.lineupIndex,o=-1===a?ue:null!==(n=null===(t=r.find((function(e){return e.index===a})))||void 0===t?void 0:t.name)&&void 0!==n?n:le;return Object(Pe.jsxs)(tn,{value:i,disabled:s.includes(i),children:[c," ",Object(Pe.jsx)(x.a,{children:o})]},i)}))})})}):-1===d&&t===Z?Object(Pe.jsx)(w.a,{form:b,children:Object(Pe.jsx)(w.a.Item,{name:"customerList",rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(Ne.a,{mode:"multiple",allowClear:!0,filterOption:function(e,n){if(!n)return!1;var t=n.children;return!!t&&-1!==t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())},disabled:-1!==P,children:a.map((function(e){var n=e.index,t=e.name;return Object(Pe.jsx)(tn,{value:n,children:t},n)}))})})}):-1===d&&t===M?Object(Pe.jsx)(w.a,{children:Object(Pe.jsx)(w.a.Item,{children:Object(Pe.jsx)(O.a,{onClick:H,disabled:-1!==P,children:Object(Pe.jsx)(I.a,{})})})}):-1===d&&t===ee?null:P===d&&t===re?Object(Pe.jsx)(w.a,{form:b,children:Object(Pe.jsx)(w.a.Item,{name:"pkgIndexNew",children:Object(Pe.jsx)(Ne.a,{children:c.map((function(e){var n,t,i=e.index,c=e.name,a=e.lineupIndex,o=-1===a?ue:null!==(n=null===(t=r.find((function(e){return e.index===a})))||void 0===t?void 0:t.name)&&void 0!==n?n:le;return Object(Pe.jsxs)(tn,{value:i,children:[c," ",Object(Pe.jsx)(x.a,{children:o})]},i)}))})})}):P===d&&t===Z?Object(Pe.jsx)(w.a,{form:b,children:Object(Pe.jsx)(w.a.Item,{name:"customerIndexListNew",rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(Ne.a,{mode:"multiple",allowClear:!0,filterOption:function(e,n){if(!n)return!1;var t=n.children;return!!t&&-1!==t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())},children:a.map((function(e){var n=e.index,t=e.name;return Object(Pe.jsx)(tn,{value:n,children:t},n)}))})})}):P===d&&t===M?Object(Pe.jsx)(w.a,{form:b,children:Object(Pe.jsxs)(w.a.Item,{children:[Object(Pe.jsx)(O.a,{onClick:D,children:Object(Pe.jsx)(g.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return N(-1)},children:Object(Pe.jsx)(L.a,{})})]})}):t===re?Object(Pe.jsxs)(Pe.Fragment,{children:[u," ",Object(Pe.jsx)(x.a,{children:f})]}):t===Z?l.map((function(e){var n=a.find((function(n){return n.index===e}));return n&&Object(Pe.jsx)(x.a,{children:n.name},n.index)})).filter((function(e){return!!e})):t===M?Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(O.a,{onClick:function(){return function(e){var n=A.find((function(n){return n.index===e}));if(n){var t=n.pkgIndex,i=n.customerIndexList;c.find((function(e){return e.index===t}))&&(b.setFieldsValue({pkgIndexNew:t,customerIndexListNew:i}),N(e))}}(d)},children:Object(Pe.jsx)(k.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return function(e){var n=A.findIndex((function(n){return n.index===e}));if(-1!==n){var t=[].concat(Object(o.a)(A.slice(0,n)),Object(o.a)(A.slice(n+1)));j(t)}}(d)},children:Object(Pe.jsx)(C.a,{})})]}):t===ee?Object(Pe.jsx)(Ge.a,{style:{cursor:"grab"}}):i})}}},expandable:{expandedRowRender:function(e){var n=e.key;return Object(Pe.jsx)("td",{colSpan:T.length+1,children:Object(Pe.jsx)(nn,{customerList:a,pkgList:c,releaseIndex:n,versionIndex:l,versionList:u,onChange:function(e){return B(n,e)}})})},rowExpandable:function(e){return-1!==e.key}},pagination:!1,size:"small"}),W?Object(Pe.jsxs)(Ue.b,{style:{backgroundColor:"#e0e0e07f",border:"1px solid #e9e9e9",display:"flex",alignItems:"center",paddingLeft:30},children:[G," ",Object(Pe.jsx)(x.a,{children:Q})]}):null]})}var cn=Ne.a.Option;function an(e){var n,t=e.versionIndex,r=e.versionList,c=e.lineupList,a=e.usedChangeIndexWithVersionIndexList,s=e.onChange,u=Object(F.useForm)(),l=Object(d.a)(u,1)[0],j=Object(i.useState)(-1),x=Object(d.a)(j,2),f=x[0],b=x[1];Object(i.useEffect)((function(){b(-1)}),[t,r,c]);var h=r.find((function(e){return e.index===t})),v=null!==(n=null===h||void 0===h?void 0:h.changeList)&&void 0!==n?n:[],P=[{key:$,dataIndex:$,title:he,width:"25%"},{key:X,dataIndex:X,title:be,width:"25%"},{key:_,dataIndex:_,title:xe,width:"25%"},{key:te,dataIndex:te,title:ve,width:"12.5%"},{key:M,dataIndex:M,title:je,width:"12.5%"}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function V(){l.validateFields([A,H]).then((function(){var e=l.getFieldsValue([A,q,N,H]),n=e.description,t=e.beforeChange,i=e.afterChange,r=e.lineup,c=ke(v.map((function(e){return e.index}))),a=[].concat(Object(o.a)(v),[{index:c,description:n,beforeChange:t,afterChange:i,lineupIndex:r}]);s(a),l.setFieldsValue({description:"",beforeChange:"",afterChange:"",lineup:-1})})).catch((function(e){console.error(e)}))}function E(){l.validateFields([T,B]).then((function(){var e=l.getFieldsValue([T,z,S,B]),n=e.descriptionNew,t=e.beforeChangeNew,i=e.afterChangeNew,r=e.lineupNew,c=v.findIndex((function(e){return e.index===f}));if(-1!==c){var a=[].concat(Object(o.a)(v.slice(0,c)),[{index:f,description:n,beforeChange:t,afterChange:i,lineupIndex:r}],Object(o.a)(v.slice(c+1)));s(a),b(-1)}})).catch((function(e){console.error(e)}))}var R=[{key:-1}].concat(Object(o.a)(v.map((function(e){return{key:e.index,description:e.description,beforeChange:e.beforeChange,afterChange:e.afterChange,lineup:e.lineupIndex}}))));return Object(Pe.jsx)(y.a,{columns:P,dataSource:R,components:{body:{cell:function(e){var n,i,r=e.record,d=e.dataIndex,u=e.children,j=Object(m.a)(e,["record","dataIndex","children"]),x=r.key,h=r.lineup;return Object(Pe.jsx)("td",Object(p.a)(Object(p.a)({},j),{},{style:{verticalAlign:"top"},children:-1===x&&d===$?Object(Pe.jsx)(w.a,{form:l,children:Object(Pe.jsx)(w.a.Item,{name:A,rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(Ze.a,{autoSize:!0,disabled:-1!==f})})}):-1===x&&d===X?Object(Pe.jsx)(w.a,{form:l,children:Object(Pe.jsx)(w.a.Item,{name:q,help:!1,children:Object(Pe.jsx)(Ze.a,{autoSize:!0,disabled:-1!==f})})}):-1===x&&d===_?Object(Pe.jsx)(w.a,{form:l,children:Object(Pe.jsx)(w.a.Item,{name:N,help:!1,children:Object(Pe.jsx)(Ze.a,{autoSize:!0,disabled:-1!==f})})}):-1===x&&d===te?Object(Pe.jsx)(w.a,{form:l,children:Object(Pe.jsx)(w.a.Item,{name:H,initialValue:-1,children:Object(Pe.jsxs)(Ne.a,{disabled:-1!==f,children:[Object(Pe.jsx)(cn,{value:-1,children:ue},-1),c.map((function(e){var n=e.index,t=e.name;return Object(Pe.jsx)(cn,{value:n,children:t},n)}))]})})}):-1===x&&d===M?Object(Pe.jsx)(w.a,{children:Object(Pe.jsx)(w.a.Item,{children:Object(Pe.jsx)(O.a,{onClick:V,disabled:-1!==f,children:Object(Pe.jsx)(I.a,{})})})}):f===x&&d===$?Object(Pe.jsx)(w.a,{form:l,children:Object(Pe.jsx)(w.a.Item,{name:T,rules:[{required:!0}],help:!1,children:Object(Pe.jsx)(Ze.a,{autoSize:!0})})}):f===x&&d===X?Object(Pe.jsx)(w.a,{form:l,children:Object(Pe.jsx)(w.a.Item,{name:z,help:!1,children:Object(Pe.jsx)(Ze.a,{autoSize:!0})})}):f===x&&d===_?Object(Pe.jsx)(w.a,{form:l,children:Object(Pe.jsx)(w.a.Item,{name:S,help:!1,children:Object(Pe.jsx)(Ze.a,{autoSize:!0})})}):f===x&&d===te?Object(Pe.jsx)(w.a,{form:l,children:Object(Pe.jsx)(w.a.Item,{name:B,children:Object(Pe.jsxs)(Ne.a,{children:[Object(Pe.jsx)(cn,{value:-1,children:ue},-1),c.map((function(e){var n=e.index,t=e.name;return Object(Pe.jsx)(cn,{value:n,children:t},n)}))]})})}):f===x&&d===M?Object(Pe.jsx)(w.a,{children:Object(Pe.jsxs)(w.a.Item,{children:[Object(Pe.jsx)(O.a,{onClick:E,icon:Object(Pe.jsx)(g.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return b(-1)},icon:Object(Pe.jsx)(L.a,{})})]})}):d===$||d===X||d===_?Object(Pe.jsx)(Ze.a,{value:u[1],autoSize:!0,style:{border:"none "}}):d===te?-1===h?ue:null!==(n=null===(i=c.find((function(e){return e.index===h})))||void 0===i?void 0:i.name)&&void 0!==n?n:le:d===M?Object(Pe.jsx)(w.a,{children:Object(Pe.jsxs)(w.a.Item,{children:[Object(Pe.jsx)(O.a,{onClick:function(){return function(e){var n=v.find((function(n){return n.index===e}));if(n){var t=n.description,i=n.beforeChange,r=n.afterChange,c=n.lineupIndex;l.setFieldsValue({descriptionNew:t,beforeChangeNew:i,afterChangeNew:r,lineupNew:c}),b(e)}}(x)},icon:Object(Pe.jsx)(k.a,{})}),Object(Pe.jsx)(O.a,{onClick:function(){return function(e){var n=v.findIndex((function(n){return n.index===e})),t=[].concat(Object(o.a)(v.slice(0,n)),Object(o.a)(v.slice(n+1)));s(t)}(x)},icon:Object(Pe.jsx)(C.a,{}),disabled:!!a.find((function(e){return e.versionIndex===t&&e.changeIndex===x}))})]})}):u}))}}},pagination:!1,size:"small"})}var on=[],dn=[],sn=[],un=[],ln=t(169);function jn(e){var n=e.options,t=e.onChangeOptions,i=n.tagStyle;return Object(Pe.jsx)(w.a,{children:Object(Pe.jsx)(w.a.Item,{label:"Tab style",children:Object(Pe.jsxs)(ln.a.Group,{value:i,onChange:function(e){t(Object(p.a)(Object(p.a)({},n),{},{tagStyle:e.target.value}))},children:[Object(Pe.jsx)(ln.a,{value:"comma",children:"<A, B, C>"}),Object(Pe.jsx)(ln.a,{value:"separate",children:"<A><B><C>"})]})})})}var xn=s.a.Panel;var fn=function(){var e,n=Object(i.useState)({tagStyle:"separate"}),t=Object(d.a)(n,2),r=t[0],c=t[1],a=Object(i.useState)(un),m=Object(d.a)(a,2),p=m[0],I=m[1],g=Object(i.useState)(-1),L=Object(d.a)(g,2),k=L[0],C=L[1],y=Object(i.useState)(dn),w=Object(d.a)(y,2),P=w[0],F=w[1],N=Object(i.useState)(sn),S=Object(d.a)(N,2),V=S[0],E=S[1],q=Object(i.useState)(on),z=Object(d.a)(q,2),R=z[0],A=z[1],T=Object(i.useState)(!1),H=Object(d.a)(T,2),B=H[0],D=H[1],J=Object(i.useState)(""),K=Object(d.a)(J,2),W=K[0],G=K[1],U=Object(ge.uniqWith)(p.reduce((function(e,n){var t=n.releaseList.reduce((function(e,n){var t=n.customerIndexListPerChangeList;return[].concat(Object(o.a)(e),Object(o.a)(t.filter((function(e){var n=e.customerIndexList;return n&&n.length})).map((function(e){return{versionIndex:e.versionIndex,changeIndex:e.changeIndex}}))))}),[]);return[].concat(Object(o.a)(e),Object(o.a)(t))}),[]),(function(e,n){return e.versionIndex===n.versionIndex&&e.changeIndex===n.changeIndex})),M=Object(ge.uniq)([].concat(Object(o.a)(p.reduce((function(e,n){var t=n.changeList;return[].concat(Object(o.a)(e),Object(o.a)(t.map((function(e){return e.lineupIndex}))))}),[])),Object(o.a)(V.map((function(e){return e.lineupIndex}))))),_=Object(ge.uniq)(p.reduce((function(e,n){var t=n.releaseList;return[].concat(Object(o.a)(e),Object(o.a)(t.map((function(e){return e.pkgIndex}))))}),[])),Q=Object(ge.uniq)(p.reduce((function(e,n){var t=n.releaseList;return[].concat(Object(o.a)(e),Object(o.a)(t.reduce((function(e,n){var t=n.customerIndexList,i=n.customerIndexListPerChangeList;return[].concat(Object(o.a)(e),Object(o.a)(t),Object(o.a)(i.reduce((function(e,n){var t=n.customerIndexList;return[].concat(Object(o.a)(e),Object(o.a)(t))}),[])))}),[])))}),[])),X=p.find((function(e){return e.index===k})),$=X&&-1!==X.indexPrev?null!==(e=p.find((function(e){return e.index===X.indexPrev})))&&void 0!==e?e:-1:void 0;return Object(Pe.jsxs)("div",{className:"App",children:[Object(Pe.jsx)(We,{customerList:R,lineupList:P,pkgList:V,versionList:p,onNew:function(){C(-1),A([]),F([]),E([]),I([])},onLoad:function(e){var n=e.customerList,t=e.lineupList,i=e.pkgList,r=e.versionList;C(-1),A(n),F(t),E(i),I(r)}}),Object(Pe.jsx)(u.a,{children:Object(Pe.jsx)(l.a,{span:16,offset:4,children:Object(Pe.jsxs)(j.a,{defaultActiveKey:ne,children:[Object(Pe.jsxs)(j.a.TabPane,{tab:"History",children:[Object(Pe.jsx)(qe.a,{level:2,children:"History"}),Object(Pe.jsx)(s.a,{defaultActiveKey:[de],children:Object(Pe.jsx)(xn,{header:"Versions",children:Object(Pe.jsx)(He,{versionList:p,onChange:function(e){e.find((function(e){return e.index===k}))||C(-1),I(e)},onPublish:function(e){var n=function(e,n,t,i,r,c){if(!function(e,n){var t=e.find((function(e){return e.index===n}));if(!t)return!1;for(var i=t,r=i,c=r.index,a=r.indexPrev,o=t,d=o,s=d.index,u=d.indexPrev;i||o;){if(!(i=e.find((function(e){return e.index===a}))))return!1;var l=i;if(c=l.index,a=l.indexPrev,!(o=e.find((function(e){return e.index===u}))))return!1;var j=o;if(s=j.index,u=j.indexPrev,!(o=e.find((function(e){return e.index===u}))))return!1;var x=o;if(s=x.index,u=x.indexPrev,c===s)return!0}}(e,n)){var a=[];r.forEach((function(r){a.push({customerIndexList:[r.index],releaseHistory:ye(e,n,t,i,r)})}));for(var d=a.length-1;d>=0;d-=1)for(var s=a[d],u=s.customerIndexList,l=s.releaseHistory,j=d-1;j>=0;j-=1){var x=a[j],f=x.customerIndexList;if(l===x.releaseHistory){f.push.apply(f,Object(o.a)(u)),a.splice(d,1);break}}return a.filter((function(e){return e.releaseHistory})).map((function(e){var n,t=e.customerIndexList,i=e.releaseHistory,a=(n=t,r.filter((function(e){return n.includes(e.index)})).map((function(e){return e.name}))),o="comma"===c?"<".concat(a.join(", "),">"):a.map((function(e){return"<".concat(e,">")})).join("");return"".concat(o,"\n").concat(Ce(i),"\n").concat(o.replace(/</g,"</"))})).join("\n")}}(p,e,P,V,R,r.tagStyle);G(null!==n&&void 0!==n?n:le),D(!0)},onSelect:function(e){C(e)}})},de)}),X?Object(Pe.jsxs)(Pe.Fragment,{children:[Object(Pe.jsx)(qe.a,{level:3,children:X.name}),$?Object(Pe.jsxs)(Pe.Fragment,{children:["Previous"," ",Object(Pe.jsx)(x.a,{children:-1===$?le:$.name})]}):null,Object(Pe.jsxs)(f.b,{direction:"vertical",style:{width:"100%"},children:[Object(Pe.jsx)(s.a,{defaultActiveKey:[Y],children:Object(Pe.jsx)(xn,{header:"Changes",children:Object(Pe.jsx)(an,{versionIndex:k,versionList:p,lineupList:P,usedChangeIndexWithVersionIndexList:U,onChange:function(e){var n=p.findIndex((function(e){return e.index===k}));if(-1!==n){var t=p[n];t.changeList=e;var i=[].concat(Object(o.a)(p.slice(0,n)),[t],Object(o.a)(p.slice(n+1)));I(i)}}})},Y)}),Object(Pe.jsx)(s.a,{defaultActiveKey:[ae],children:Object(Pe.jsx)(xn,{header:"Releases",children:Object(Pe.jsx)(rn,{lineupList:P,pkgList:V,customerList:R,usedPkgIndexList:_,versionList:p,versionIndex:k,onChange:function(e){var n=p.findIndex((function(e){return e.index===k}));if(-1!==n){var t=p[n];t.releaseList=e;var i=[].concat(Object(o.a)(p.slice(0,n)),[t],Object(o.a)(p.slice(n+1)));I(i)}}})},ae)})]})]}):null]},ne),Object(Pe.jsxs)(j.a.TabPane,{tab:Oe,children:[Object(Pe.jsx)(qe.a,{level:2,children:"Customers"}),Object(Pe.jsx)(Fe,{title:" Customer",enumList:R,onChange:A,usedIndexList:Q})]},Z),Object(Pe.jsxs)(j.a.TabPane,{tab:"Lineups",children:[Object(Pe.jsx)(qe.a,{level:2,children:"Lineups"}),Object(Pe.jsx)(Fe,{title:ve,enumList:P,onChange:F,usedIndexList:M})]},"lineups"),Object(Pe.jsxs)(j.a.TabPane,{tab:"Packages",children:[Object(Pe.jsx)(qe.a,{level:2,children:"Packages"}),Object(Pe.jsx)(Ve,{pkgList:V,lineupList:P,onChange:E,usedPkgIndexList:_})]},"packages"),Object(Pe.jsxs)(j.a.TabPane,{tab:"Options",children:[Object(Pe.jsx)(qe.a,{level:2,children:"Options"}),Object(Pe.jsx)(jn,{options:r,onChangeOptions:c})]},"options")]})})}),Object(Pe.jsx)(u.a,{style:{marginTop:"1em"},children:Object(Pe.jsx)(l.a,{span:24,style:{display:"flex",justifyContent:"center"},children:Object(Pe.jsx)(Re.a,{href:"https://github.com/gsongsong/rhm",target:"_blank",rel:"noreferrer",children:Object(Pe.jsx)(h.a,{})})})}),Object(Pe.jsx)(b.a,{title:"Release history",footer:Object(Pe.jsxs)(O.a,{onClick:function(){return navigator.clipboard.writeText(W)},children:[Object(Pe.jsx)(v.a,{}),"Copy to clipboard"]}),visible:B,onCancel:function(){return D(!1)},width:960,children:Object(Pe.jsx)(Ze.a,{value:W,cols:80,autoSize:!0})})]})},bn=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,475)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),i(e),r(e),c(e),a(e)}))};a.a.render(Object(Pe.jsx)(r.a.StrictMode,{children:Object(Pe.jsx)(fn,{})}),document.getElementById("root")),bn()}},[[453,1,2]]]);
//# sourceMappingURL=main.1d48f528.chunk.js.map