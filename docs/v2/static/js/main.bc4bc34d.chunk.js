(this.webpackJsonprhm=this.webpackJsonprhm||[]).push([[0],{257:function(e,n,t){},451:function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i),c=t(35),a=t.n(c),d=t(11),o=t(16),s=(t(256),t(257),t(461)),u=t(453),l=t(454),j=t(456),x=t(464),f=t(465),b=t(460),O=t(60),v=t(472),h=t(249),m=t(43),p=t(7),I=t(247),g=t(171),L=t(71),k=t(248),C=t(466),y=t(455),w=t(457),F=t(459),P=t(62),N="afterChange",S="afterChangeNew",V="beforeChange",E="beforeChangeNew",q="customerIndexList",z="description",R="descriptionNew",A="lineup",H="lineupNew",T="name",B="nameNew",D="previous",J="previousNew",K="version",W="invalidSortable",U="actions",G="afterChange",M="beforeChange",_="changes",Q="customers",X="description",Y="dragHandle",Z="history",$="lineup",ee="name",ne="package",te="previous",ie="releases",re="version",ce="versions",ae="(Global)",de="(None)",oe="(Error)",se="Actions",ue="After change",le="Before change",je="Customers",xe="Description",fe="Lineup",be="Package",Oe="Previous",ve="Version",he=t(76);function me(e,n){var t=[],i=e.find((function(e){return e.index===n}));if(!i)return t;t.push(n);var r=i.indexPrev;return t.push.apply(t,Object(d.a)(me(e,r))),t}function pe(e){return e.sort((function(e,n){return e-n})).reduce((function(e,n){return n===e?e+1:e}),0)}function Ie(e){return e.replace(/^/gm,"    ")}function ge(e,n,t,i,r){var c=[-1].concat(Object(d.a)(t.map((function(e){return e.index})))),a=[];return c.forEach((function(t){a.push({lineupIndex:t,releaseHistory:Le(e,n,t,i,r)})})),a.filter((function(e){return e.releaseHistory})).map((function(e){var n=e.lineupIndex,i=e.releaseHistory,r=t.find((function(e){return e.index===n}));if(r){var c=r.name;return"<".concat(c,">\n").concat(Ie(i),"\n</").concat(c,">")}return Ie(i)})).join("\n")}function Le(e,n,t,i,r){return function(e,n,t,i,r){console.group({customerIndex:e});for(var c=[],a=n.find((function(e){return e.index===t})),o="",s=[],u=!0,l=function(){console.group({versionNext:a});var t=a,l=t.indexPrev,j=t.releaseList;if(u){var x=j.find((function(n){var t=n.pkgIndex;return!!n.customerIndexList.includes(e)&&!!r.find((function(e){return e.index===t&&e.lineupIndex===i}))}));if(u=!1,!x)return{v:c}}for(var f=function(t){var a=j[t],u=a.customerIndexList,l=a.customerIndexListPerChangeList,x=a.pkgIndex,f=r.find((function(e){return e.index===x}));console.log({customerIndexList:u});var b,O=-1!==u.findIndex((function(n){return n===e}));if((null===f||void 0===f?void 0:f.lineupIndex)!==i)return"continue";O&&(o&&(console.log("Pushed",o,s),c.unshift({pkgName:o,changeList:[].concat(s)}),s.length=0),o=null!==(b=null===f||void 0===f?void 0:f.name)&&void 0!==b?b:"");var v=l.filter((function(n){var t=n.customerIndexList;return t.includes(e)||t.includes(-1)})),h=n.map((function(e){return e.changeList.filter((function(n){var t=n.lineupIndex;return v.find((function(i){return i.versionIndex===e.index&&i.changeIndex===n.index&&n.lineupIndex===t}))}))})).flat();s.unshift.apply(s,Object(d.a)(h)),console.log({changeListToAccumulate:s})},b=j.length-1;b>=0;b-=1)f(b);a=n.find((function(e){return e.index===l})),console.groupEnd()};a;){var j=l();if("object"===typeof j)return j.v}return o&&(console.log("Pushed",o,s),c.unshift({pkgName:o,changeList:[].concat(s)})),console.groupEnd(),c}(r.index,e,n,t,i).map((function(e,n){var t=e.pkgName,i=e.changeList,r=0===n?"- Initial release":i.map((function(e){var n=e.description,t=e.beforeChange,i=e.afterChange,r=["[Description]",Ie(n)];return(t||i)&&r.push("[Enhancement]"),t&&(r.push(Ie("[Before change]")),r.push(Ie(Ie(t)))),i&&(r.push(Ie("[After change]")),r.push(Ie(Ie(i)))),r.join("\n")})).join("\n");return r?"".concat(t,"\n").concat(Ie(r)):""})).filter((function(e){return!!e})).join("\n").trim()}var ke=t(1);function Ce(e){var n=e.title,t=e.enumList,r=e.onChange,c=e.usedIndexList,a=Object(P.useForm)(),s=Object(o.a)(a,1)[0],u=Object(i.createRef)(),l=Object(i.createRef)(),j=Object(i.useState)(-1),x=Object(o.a)(j,2),f=x[0],b=x[1],v=[{key:ee,dataIndex:ee,title:n},{key:U,dataIndex:U,title:se}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function h(){s.validateFields([T]).then((function(){var e=s.getFieldValue(T);if(!t.find((function(n){return n.name===e}))){var n=pe(t.map((function(e){return e.index}))),i=[].concat(Object(d.a)(t),[{index:n,name:e}]).sort((function(e,n){return e.name.localeCompare(n.name)}));r(i),s.setFieldsValue({name:""})}})).catch((function(e){console.error(e)}))}function N(){s.validateFields([B]).then((function(){var e=s.getFieldValue(B);if(!t.find((function(n){return n.index!==f&&n.name===e}))){var n=t.findIndex((function(e){return e.index===f}));if(-1!==n){var i=[].concat(Object(d.a)(t.slice(0,n)),[{index:f,name:e}],Object(d.a)(t.slice(n+1)));r(i),b(-1)}}})).catch((function(e){console.error(e)}))}var S=[{key:-1}].concat(Object(d.a)(t.map((function(e){return{key:e.index,name:e.name}}))));return Object(ke.jsx)(y.a,{columns:v,dataSource:S,components:{body:{cell:function(e){var n=e.record,i=e.dataIndex,a=e.children,o=Object(m.a)(e,["record","dataIndex","children"]),j=n.key;return Object(ke.jsx)("td",Object(p.a)(Object(p.a)({},o),{},{children:-1===j&&i===ee?Object(ke.jsx)(w.a,{form:s,onFinish:h,children:Object(ke.jsx)(w.a.Item,{name:T,rules:[{required:!0}],help:!1,children:Object(ke.jsx)(F.a,{onPressEnter:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.click()},disabled:-1!==f})})}):-1===j&&i===U?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsx)(w.a.Item,{children:Object(ke.jsx)(O.a,{ref:u,onClick:h,disabled:-1!==f,children:Object(ke.jsx)(I.a,{})})})}):f===j&&i===ee?Object(ke.jsx)(w.a,{form:s,onFinish:N,children:Object(ke.jsx)(w.a.Item,{name:B,rules:[{required:!0}],help:!1,children:Object(ke.jsx)(F.a,{onPressEnter:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.click()}})})}):f===j&&i===U?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsxs)(w.a.Item,{children:[Object(ke.jsx)(O.a,{ref:l,onClick:N,children:Object(ke.jsx)(g.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return b(-1)},children:Object(ke.jsx)(L.a,{})})]})}):i===ee?a:i===U?Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(O.a,{onClick:function(){return function(e){var n=t.find((function(n){return n.index===e}));n&&(s.setFieldsValue({nameNew:n.name}),b(e))}(j)},children:Object(ke.jsx)(k.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return function(e){if(!c||!c.includes(e)){var n=t.findIndex((function(n){return n.index===e}));if(-1!==n){var i=[].concat(Object(d.a)(t.slice(0,n)),Object(d.a)(t.slice(n+1)));r(i)}}}(j)},disabled:null===c||void 0===c?void 0:c.includes(j),children:Object(ke.jsx)(C.a,{})})]}):null}))}}},pagination:!1,size:"small"})}var ye=t(133),we=ye.a.Option;function Fe(e){var n=e.pkgList,t=e.lineupList,r=e.onChange,c=e.usedPkgIndexList,a=Object(P.useForm)(),s=Object(o.a)(a,1)[0],u=Object(i.createRef)(),l=Object(i.createRef)(),j=Object(i.useState)(-1),x=Object(o.a)(j,2),f=x[0],b=x[1];Object(i.useEffect)((function(){b(-1)}),[t]);var v=[{key:ne,dataIndex:ne,title:be},{key:$,dataIndex:$,title:fe},{key:U,dataIndex:U,title:se}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function h(){s.validateFields([T,A]).then((function(){var e=s.getFieldsValue([T,A]),t=e.name,i=e.lineup;if(!n.find((function(e){return e.name===t}))){var c=pe(n.map((function(e){return e.index}))),a=[].concat(Object(d.a)(n),[{index:c,name:t,lineupIndex:i}]).sort((function(e,n){return e.name.localeCompare(n.name)}));r(a),s.setFieldsValue({name:"",lineup:-1})}})).catch((function(e){console.error(e)}))}function N(){s.validateFields([B]).then((function(){var e=s.getFieldsValue([B,H]),t=e.nameNew,i=e.lineupNew;if(!n.find((function(e){return e.index!==f&&e.name===t}))){var c=n.findIndex((function(e){return e.index===f}));if(-1!==c){var a=[].concat(Object(d.a)(n.slice(0,c)),[{index:f,name:t,lineupIndex:i}],Object(d.a)(n.slice(c+1)));r(a),b(-1)}}})).catch((function(e){console.error(e)}))}var S=[{key:-1}].concat(Object(d.a)(n.map((function(e){return{key:e.index,package:e.name,lineup:e.lineupIndex}}))));return Object(ke.jsx)(y.a,{columns:v,dataSource:S,components:{body:{cell:function(e){var i,a,o=e.record,j=e.dataIndex,x=e.children,v=Object(m.a)(e,["record","dataIndex","children"]),y=o.key,P=o.lineup;return Object(ke.jsx)("td",Object(p.a)(Object(p.a)({},v),{},{children:-1===y&&j===ne?Object(ke.jsx)(w.a,{form:s,onFinish:h,children:Object(ke.jsx)(w.a.Item,{name:T,rules:[{required:!0}],help:!1,children:Object(ke.jsx)(F.a,{onPressEnter:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.click()},disabled:-1!==f})})}):-1===y&&j===$?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsx)(w.a.Item,{name:A,initialValue:-1,children:Object(ke.jsxs)(ye.a,{disabled:-1!==f,children:[Object(ke.jsx)(we,{value:-1,children:de},-1),t.map((function(e){var n=e.index,t=e.name;return Object(ke.jsx)(we,{value:n,children:t},n)}))]})})}):-1===y&&j===U?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsx)(w.a.Item,{children:Object(ke.jsx)(O.a,{ref:u,onClick:h,disabled:-1!==f,children:Object(ke.jsx)(I.a,{})})})}):f===y&&j===ne?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsx)(w.a.Item,{name:B,rules:[{required:!0}],help:!1,children:Object(ke.jsx)(F.a,{onPressEnter:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.click()}})})}):f===y&&j===$?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsx)(w.a.Item,{name:H,children:Object(ke.jsxs)(ye.a,{children:[Object(ke.jsx)(we,{value:-1,children:de},-1),t.map((function(e){var n=e.index,t=e.name;return Object(ke.jsx)(we,{value:n,children:t},n)}))]})})}):f===y&&j===U?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsxs)(w.a.Item,{children:[Object(ke.jsx)(O.a,{ref:l,onClick:N,icon:Object(ke.jsx)(g.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return b(-1)},icon:Object(ke.jsx)(L.a,{})})]})}):j===ne?x:j===$?-1===P?de:null!==(i=null===(a=t.find((function(e){return e.index===P})))||void 0===a?void 0:a.name)&&void 0!==i?i:oe:j===U?Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(O.a,{onClick:function(){return function(e){var t=n.find((function(n){return n.index===e}));if(t){var i=t.name,r=t.lineupIndex;s.setFieldsValue({nameNew:i,lineupNew:r}),b(e)}}(y)},icon:Object(ke.jsx)(k.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return function(e){if(!c||!c.includes(e)){var t=n.findIndex((function(n){return n.index===e}));if(-1!==t){var i=[].concat(Object(d.a)(n.slice(0,t)),Object(d.a)(n.slice(t+1)));r(i)}}}(y)},disabled:null===c||void 0===c?void 0:c.includes(y),icon:Object(ke.jsx)(C.a,{})})]}):null}))}}},pagination:!1,size:"small"})}var Pe=t(118),Ne=t.n(Pe),Se=t(167),Ve=t.n(Se),Ee=t(467),qe=ye.a.Option;function ze(e){var n=e.versionList,t=e.onChange,r=e.onPublish,c=e.onSelect,a=Object(P.useForm)(),s=Object(o.a)(a,1)[0],u=Object(i.createRef)(),l=Object(i.createRef)(),j=Object(i.useState)(-1),x=Object(o.a)(j,2),f=x[0],b=x[1],v=[{key:re,dataIndex:re,title:ve},{key:te,dataIndex:te,title:Oe},{key:U,dataIndex:U,title:se}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function h(){s.validateFields([K]).then((function(){var e=s.getFieldsValue([K,D]),i=e.version,r=e.previous;if(!n.find((function(e){return e.name===i}))){var c=pe(n.map((function(e){return e.index}))),a=[].concat(Object(d.a)(n),[{index:c,name:i,indexPrev:r,changeList:[],releaseList:[]}]);s.setFieldsValue({version:""}),t(a)}})).catch((function(e){console.error(e)}))}function N(){s.validateFields([B]).then((function(){var e=s.getFieldsValue([B,J]),i=e.nameNew,r=e.previousNew;if(!n.find((function(e){return e.index!==f&&e.name===i}))){var c=n.findIndex((function(e){return e.index===f}));if(-1!==c){var a=n[c],o=a.changeList,u=a.releaseList,l=[].concat(Object(d.a)(n.slice(0,c)),[{index:f,name:i,indexPrev:r,changeList:o,releaseList:u}],Object(d.a)(n.slice(c+1)));t(l),b(-1)}}})).catch((function(e){console.error(e)}))}var S=Object(he.uniq)(n.filter((function(e){var t=e.index;return!!n.find((function(e){return e.indexPrev===t}))})).map((function(e){return e.index}))),V=[{key:-1}].concat(Object(d.a)(n.map((function(e){return{key:e.index,version:e.name,previous:e.indexPrev}}))));return Object(ke.jsx)(y.a,{columns:v,dataSource:V,components:{body:{cell:function(e){var i,a,o=e.record,j=e.dataIndex,x=e.children,v=Object(m.a)(e,["record","dataIndex","children"]),y=o.key,P=o.previous;return Object(ke.jsx)("td",Object(p.a)(Object(p.a)({},v),{},{children:-1===y&&j===re?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsx)(w.a.Item,{name:K,rules:[{required:!0}],help:!1,children:Object(ke.jsx)(F.a,{onPressEnter:function(){var e;return null===(e=u.current)||void 0===e?void 0:e.click()},disabled:-1!==f})})}):-1===y&&j===te?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsx)(w.a.Item,{name:D,initialValue:-1,children:Object(ke.jsxs)(ye.a,{disabled:-1!==f,children:[Object(ke.jsx)(qe,{value:-1,children:de},-1),n.map((function(e){var n=e.index,t=e.name;return Object(ke.jsx)(qe,{value:n,children:t},n)}))]})})}):-1===y&&j===U?Object(ke.jsx)(w.a,{children:Object(ke.jsx)(w.a.Item,{children:Object(ke.jsx)(O.a,{ref:u,onClick:h,disabled:-1!==f,icon:Object(ke.jsx)(I.a,{})})})}):f===y&&j===re?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsx)(w.a.Item,{name:B,rules:[{required:!0}],help:!1,children:Object(ke.jsx)(F.a,{onPressEnter:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.click()}})})}):f===y&&j===te?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsx)(w.a.Item,{name:J,children:Object(ke.jsxs)(ye.a,{children:[Object(ke.jsx)(qe,{value:-1,children:de},-1),n.map((function(e){var n=e.index,t=e.name;return Object(ke.jsx)(qe,{value:n,disabled:n===y,children:t},n)}))]})})}):f===y&&j===U?Object(ke.jsx)(w.a,{form:s,children:Object(ke.jsxs)(w.a.Item,{children:[Object(ke.jsx)(O.a,{ref:l,onClick:N,icon:Object(ke.jsx)(g.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return b(-1)},icon:Object(ke.jsx)(L.a,{})})]})}):j===re?Object(ke.jsx)(Ve.a,{onClick:function(){return c(y)},children:x}):j===te?-1===P?de:null!==(i=null===(a=n.find((function(e){return e.index===P})))||void 0===a?void 0:a.name)&&void 0!==i?i:oe:j===U?Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(O.a,{onClick:function(){return function(e){var t=n.find((function(n){return n.index===e}));if(t){var i=t.name,r=t.indexPrev;s.setFieldsValue({nameNew:i,previousNew:r}),b(e)}}(y)},icon:Object(ke.jsx)(k.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return function(e){if(!n.find((function(n){return n.indexPrev===e}))){var i=n.findIndex((function(n){return n.index===e}));if(-1!==i){var r=[].concat(Object(d.a)(n.slice(0,i)),Object(d.a)(n.slice(i+1,0)));t(r)}}}(y)},disabled:S.includes(y),icon:Object(ke.jsx)(C.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return function(e){r(e)}(y)},icon:Object(ke.jsx)(Ee.a,{})})]}):x}))}}},pagination:!1,size:"small"})}var Re=t(468),Ae=t(469),He=t(470),Te=t(97);function Be(e){var n,t=e.customerList,r=e.lineupList,c=e.pkgList,a=e.versionList,s=e.onNew,u=e.onLoad,l=Object(i.createRef)(),j=Object(i.createRef)(),x=Object(i.useState)("Untitled"),f=Object(o.a)(x,2),b=f[0],O=f[1];var v=new FileReader;return v.onload=function(e){var t;if(n){var i=null===(t=e.target)||void 0===t?void 0:t.result;if("string"===typeof i){var r=n.name,c=r.lastIndexOf("."),a=r.substring(0,c),o=function(e){var n=JSON.parse(e),t=n.versionList,i=n.lineupList,r=n.pkgList,c=n.customerList;return t[0]&&void 0!==t[0].versionIndex?{versionList:t.map((function(e){var n=e.versionIndex,t=e.versionName,i=e.versionIndexPrev,r=e.changeList,c=e.releaseList;return{index:n,name:t,indexPrev:i,changeList:r.map((function(e){return{index:e.changeIndex,description:e.description,beforeChange:e.beforeChange,afterChange:e.afterChange,customerIndexList:e.targetCustomerList.map((function(e){return e.customerIndex})),lineupIndex:-1}})),releaseList:c.map((function(e){return{index:e.releaseIndex,pkgIndex:e.pkgIndex,customerIndexList:e.targetCustomerList.map((function(e){return e.customerIndex}))}}))}})),lineupList:[],pkgList:r.map((function(e){return{index:e.pkgIndex,name:e.pkgName,lineupIndex:-1}})),customerList:c.map((function(e){return{index:e.customerIndex,name:e.customerName}}))}:(t.forEach((function(e){var n=e.index,t=e.changeList,i=e.releaseList;i.forEach((function(e){var n;e.customerIndexListPerChangeList=null!==(n=e.customerIndexListPerChangeList)&&void 0!==n?n:[]})),t.forEach((function(e){var t=e.index,c=e.customerIndexList;if(c&&c.length)c.forEach((function(c){var a=i.find((function(n){var t=n.pkgIndex;return r.find((function(i){return i.index===t&&i.lineupIndex===e.lineupIndex&&n.customerIndexList.includes(c)}))}));if(a){var o=a.customerIndexListPerChangeList,s=o.find((function(e){return e.versionIndex===n&&e.changeIndex===t}));s?s.customerIndexList=Object(he.uniq)([].concat(Object(d.a)(s.customerIndexList),[c])):o.push({versionIndex:n,changeIndex:t,customerIndexList:[c]})}}));else if(c&&!c.length){var a=i.find((function(n){var t=n.pkgIndex;return r.find((function(n){return n.index===t&&n.lineupIndex===e.lineupIndex}))}));if(a){var o=a.customerIndexListPerChangeList,s=o.find((function(e){return e.versionIndex===n&&e.changeIndex===t}));s?s.customerIndexList=[-1]:o.push({versionIndex:n,changeIndex:t,customerIndexList:[-1]})}}}))})),{versionList:t,lineupList:i,pkgList:r,customerList:c})}(i),s=o.versionList,l=o.lineupList,j=o.pkgList,x=o.customerList;O(a),u({customerList:x,lineupList:l,pkgList:j,versionList:s})}}},Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)(Te.a,{mode:"horizontal",selectable:!1,children:[Object(ke.jsx)(Te.a.Item,{onClick:s,icon:Object(ke.jsx)(Re.a,{})},"new"),Object(ke.jsx)(Te.a.Item,{onClick:function(){var e;return null===(e=l.current)||void 0===e?void 0:e.click()},icon:Object(ke.jsx)(Ae.a,{})},"load"),Object(ke.jsx)(Te.a.Item,{disabled:!0,children:Object(ke.jsx)(F.a,{value:b,onChange:function(e){return O(e.target.value)}})},"featureName"),Object(ke.jsx)(Te.a.Item,{onClick:function(){return function(){if(null!==j.current){var e=new Blob([JSON.stringify({versionList:a,lineupList:r,pkgList:c,customerList:t})],{type:"application/json"});j.current.download="".concat(b,".json"),j.current.href=window.URL.createObjectURL(e),j.current.click()}}()},icon:Object(ke.jsx)(He.a,{})},"save")]}),Object(ke.jsx)("input",{type:"file",accept:".json",hidden:!0,ref:l,onChange:function(e){var t;(n=null===(t=e.target.files)||void 0===t?void 0:t[0])&&v.readAsText(n)}}),Object(ke.jsx)("a",{href:"#",ref:j,hidden:!0})]})}var De=t(471),Je=t(36),Ke=t(117),We=t(458),Ue=t(462),Ge=t(463),Me=t(55),_e=t.n(Me),Qe=ye.a.Option,Xe=We.a.Text;function Ye(e){var n,t,r,c,a=e.customerList,s=e.pkgList,u=e.releaseIndex,l=e.versionIndex,j=e.versionList,f=e.onChange,b=Object(P.useForm)(),v=Object(o.a)(b,1)[0],h=Object(i.useState)(-1),I=Object(o.a)(h,2),C=I[0],F=I[1],N=Object(i.useState)(-1),S=Object(o.a)(N,2),V=S[0],E=S[1];Object(i.useEffect)((function(){F(-1),E(-1)}),[a,s,u,l,j]);var z=j.find((function(e){return e.index===l})),R=(null!==(n=null===z||void 0===z?void 0:z.releaseList)&&void 0!==n?n:[]).find((function(e){return e.index===u})),A=null!==(t=null===R||void 0===R?void 0:R.customerIndexListPerChangeList)&&void 0!==t?t:[],H=null!==(r=null===R||void 0===R?void 0:R.pkgIndex)&&void 0!==r?r:void 0,T=[{key:re,dataIndex:re,title:ve},{key:X,dataIndex:X,title:xe},{key:Q,dataIndex:Q,title:je},{key:U,dataIndex:U,title:se}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function B(){F(-1),E(-1)}var D=me(j,l),J=s.find((function(e){return e.index===H})),K=D.reduce((function(e,n){var t=j.find((function(e){return e.index===n}));if(!t)return e;var i=t.changeList.filter((function(e){return e.lineupIndex===(null===J||void 0===J?void 0:J.lineupIndex)}));return[].concat(Object(d.a)(e),Object(d.a)(i.map((function(e){return Object(p.a)({versionIndex:n},e)}))))}),[]),W=Object(d.a)(K.map((function(e){var n,t,i=e.index,r=e.description,c=e.beforeChange,a=e.afterChange,d=e.versionIndex,o=null!==(n=null===(t=A.find((function(e){return e.versionIndex===d&&e.changeIndex===i})))||void 0===t?void 0:t.customerIndexList)&&void 0!==n?n:[];return{changeIndex:i,description:r,beforeChange:c,afterChange:a,version:d,customerIndexList:o}}))),G=null!==(c=null===R||void 0===R?void 0:R.customerIndexList)&&void 0!==c?c:[],M=a.filter((function(e){return G.includes(e.index)}));return Object(ke.jsx)(y.a,{columns:T,dataSource:W,components:{body:{cell:function(e){var n,t=e.record,i=e.dataIndex,r=e.children,c=Object(m.a)(e,["record","dataIndex","children"]);if(!t)return Object(ke.jsx)("td",Object(p.a)(Object(p.a)({colSpan:T.length},c),{},{children:r}));var o=t.changeIndex,s=t.beforeChange,u=t.afterChange,b=t.version,h=t.customerIndexList,I=j.find((function(e){return e.index===b}));return Object(ke.jsx)("td",Object(p.a)(Object(p.a)({},c),{},{children:C===b&&V===o&&i===Q?Object(ke.jsx)(w.a,{form:v,children:Object(ke.jsx)(w.a.Item,{name:q,help:!1,children:Object(ke.jsxs)(ye.a,{mode:"multiple",allowClear:!0,filterOption:function(e,n){if(!n)return!1;var t=n.children;return!!t&&-1!==t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())},children:[Object(ke.jsx)(Qe,{value:-1,children:ae},-1),M.map((function(e){var n=e.index,t=e.name;return Object(ke.jsx)(Qe,{value:n,children:t},n)}))]})})}):C===b&&V===o&&i===U?Object(ke.jsx)(w.a,{form:v,children:Object(ke.jsxs)(w.a.Item,{children:[Object(ke.jsx)(O.a,{onClick:function(){return function(e,n){var t=j.find((function(n){return n.index===e}));if(t&&t.changeList.find((function(e){return e.index===n}))&&R){var i=v.getFieldValue(q),r=i.includes(-1)?[-1]:i,c=R.customerIndexListPerChangeList,a=c.findIndex((function(t){return t.versionIndex===e&&t.changeIndex===n})),o=-1===a?[].concat(Object(d.a)(c),[{versionIndex:e,changeIndex:n,customerIndexList:r}]):[].concat(Object(d.a)(c.slice(0,a)),[{versionIndex:e,changeIndex:n,customerIndexList:r}],Object(d.a)(c.slice(a+1)));f(o)}}(b,o)},icon:Object(ke.jsx)(g.a,{})}),Object(ke.jsx)(O.a,{onClick:B,icon:Object(ke.jsx)(L.a,{})})]})}):i===re?Object(ke.jsxs)(ke.Fragment,{children:[null!==(n=null===I||void 0===I?void 0:I.name)&&void 0!==n?n:oe," ",b===l?Object(ke.jsx)(Ue.a,{color:"blue"}):null]}):i===X?Object(ke.jsx)(Ge.a,{content:function(){return Object(ke.jsx)(_,{beforeChange:s,afterChange:u})},children:r}):i===Q?h.map((function(e){var n,t=-1===e?{name:ae}:a.find((function(n){return n.index===e}));return Object(ke.jsx)(x.a,{color:"blue",children:null!==(n=null===t||void 0===t?void 0:t.name)&&void 0!==n?n:oe},e)})):i===U?Object(ke.jsx)(O.a,{onClick:function(){return function(e,n){var t=A.find((function(t){return t.versionIndex===e&&t.changeIndex===n}));if(t){var i=t.customerIndexList;v.setFieldsValue({customerIndexList:i})}F(e),E(n)}(b,o)},icon:Object(ke.jsx)(k.a,{})}):r}))}}},pagination:!1,size:"small"});function _(e){var n=e.beforeChange,t=e.afterChange;return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(Xe,{strong:!0,children:"Before change"}),Object(ke.jsx)("br",{}),Object(ke.jsx)(_e.a,{value:n,cols:80,autoSize:!0}),Object(ke.jsx)("br",{}),Object(ke.jsx)(Xe,{strong:!0,children:"After change"}),Object(ke.jsx)("br",{}),Object(ke.jsx)(_e.a,{value:t,cols:80,autoSize:!0})]})}}var Ze=ye.a.Option;function $e(e){var n,t,r=e.lineupList,c=e.pkgList,a=e.customerList,s=e.usedPkgIndexList,u=e.versionList,l=e.versionIndex,j=e.onChange,f=Object(P.useForm)(),b=Object(o.a)(f,1)[0],v=Object(i.useState)(-1),h=Object(o.a)(v,2),F=h[0],N=h[1],S=Object(i.useState)(null),V=Object(o.a)(S,2),E=V[0],q=V[1],z=Object(Je.o)(Object(Je.n)(Je.e),Object(Je.n)(Je.d,{coordinateGetter:Ke.c}));Object(i.useEffect)((function(){N(-1)}),[r,c,a,u,l]);var R=u.find((function(e){return e.index===l})),A=null!==(n=null===R||void 0===R?void 0:R.releaseList)&&void 0!==n?n:[],H=[{key:ne,dataIndex:ne,title:be},{key:Q,dataIndex:Q,title:je,width:"50%"},{key:U,dataIndex:U,title:se},{key:Y,dataIndex:Y,title:""}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function T(){b.validateFields(["pkgIndex","customerList"]).then((function(){var e=b.getFieldsValue(["pkgIndex","customerList"]),n=e.pkgIndex,t=e.customerList;if(-1!==n&&!u.find((function(e){return e.releaseList.find((function(e){return e.pkgIndex===n}))}))){var i=pe(A.map((function(e){return e.index}))),r=[].concat(Object(d.a)(A),[{index:i,pkgIndex:n,customerIndexList:t,customerIndexListPerChangeList:[]}]);j(r)}})).catch((function(e){console.error(e)}))}function B(e,n){var t=A.findIndex((function(n){return n.index===e}));if(-1!==t){var i=A[t],r=i.index,c=i.pkgIndex,a=i.customerIndexList,o=[].concat(Object(d.a)(A.slice(0,t)),[{index:r,pkgIndex:c,customerIndexList:a,customerIndexListPerChangeList:n}],Object(d.a)(A.slice(t+1)));j(o)}}function D(){b.validateFields(["pkgIndexNew","customerIndexListNew"]).then((function(){var e=b.getFieldsValue(["pkgIndexNew","customerIndexListNew"]),n=e.pkgIndexNew,t=e.customerIndexListNew;if(!A.find((function(e){return e.index!==F&&e.pkgIndex===n}))){var i=A.findIndex((function(e){return e.index===F})),r=A[i].customerIndexListPerChangeList;if(-1!==i){var c=[].concat(Object(d.a)(A.slice(0,i)),[{index:F,pkgIndex:n,customerIndexList:t,customerIndexListPerChangeList:r}],Object(d.a)(A.slice(i+1)));j(c),N(-1)}}})).catch((function(e){console.error(e)}))}var J=[{key:-1}].concat(Object(d.a)(A.map((function(e){var n,t,i=e.index,a=e.pkgIndex,d=e.customerIndexList,o=c.find((function(e){return e.index===a})),s=null===o||void 0===o?void 0:o.name,u=null===o||void 0===o?void 0:o.lineupIndex,l=-1===u?de:null!==(n=null===(t=r.find((function(e){return e.index===u})))||void 0===t?void 0:t.name)&&void 0!==n?n:oe;return{key:i,package:a,pkgName:s,customers:d,lineup:l}})))),K=A.find((function(e){return e.index===Number(E)})),G=c.find((function(e){return e.index===(null===K||void 0===K?void 0:K.pkgIndex)})),M=null===G||void 0===G?void 0:G.name,_=null===G||void 0===G?void 0:G.lineupIndex,X=null===(t=r.find((function(e){return e.index===_})))||void 0===t?void 0:t.name;return Object(ke.jsxs)(Je.a,{sensors:z,collisionDetection:Je.f,onDragStart:function(e){var n=e.active;q(n.id)},onDragEnd:function(e){var n=e.active,t=e.over;if("-1"!==n.id&&"-1"!==t.id&&n.id!==t.id){var i=A.findIndex((function(e){return e.index.toString()===n.id})),r=A.findIndex((function(e){return e.index.toString()===t.id})),c=Object(Ke.b)(A,i,r);j(c)}q(null)},children:[Object(ke.jsx)(y.a,{columns:H,dataSource:J,components:{body:{wrapper:function(e){var n=e.children,t=Object(m.a)(e,["children"]);return Object(ke.jsx)(Ke.a,Object(p.a)(Object(p.a)({items:n[1].map((function(e){return e.key.toString()})),strategy:Ke.e},t),{},{children:Object(ke.jsx)("tbody",Object(p.a)(Object(p.a)({},t),{},{children:n}))}))},row:function(e){var n,t,i=e.children,r=e.style,c=Object(m.a)(e,["children","style"]),a=null!==(n=null===(t=e["data-row-key"])||void 0===t?void 0:t.toString())&&void 0!==n?n:W,d=Object(Ke.d)({id:a}),o=d.attributes,s=d.listeners,u=d.setNodeRef,l=Number(a)>-1?{fontWeight:"bold"}:null,j=Object.assign({},r,l);return Object(ke.jsx)("tr",Object(p.a)(Object(p.a)(Object(p.a)({ref:u},o),c),{},{style:j,children:a===W?i:i.map((function(e){e.children;var n=Object(m.a)(e,["children"]);return n.key===Y?Object(ke.jsx)("td",Object(p.a)(Object(p.a)(Object(p.a)({},s),n),{},{children:e})):Object(ke.jsx)("td",Object(p.a)(Object(p.a)({},n),{},{children:e}))}))}))},cell:function(e){var n=e.record,t=e.dataIndex,i=e.children;Object(m.a)(e,["record","dataIndex","children"]);if(!n)return i;var o=n.key,u=n.pkgName,l=n.customers,f=n.lineup;return Object(ke.jsx)(ke.Fragment,{children:-1===o&&t===ne?Object(ke.jsx)(w.a,{form:b,children:Object(ke.jsx)(w.a.Item,{name:"pkgIndex",rules:[{required:!0}],help:!1,children:Object(ke.jsx)(ye.a,{disabled:-1!==F,children:c.map((function(e){var n,t,i=e.index,c=e.name,a=e.lineupIndex,d=-1===a?de:null!==(n=null===(t=r.find((function(e){return e.index===a})))||void 0===t?void 0:t.name)&&void 0!==n?n:oe;return Object(ke.jsxs)(Ze,{value:i,disabled:s.includes(i),children:[c," ",Object(ke.jsx)(x.a,{children:d})]},i)}))})})}):-1===o&&t===Q?Object(ke.jsx)(w.a,{form:b,children:Object(ke.jsx)(w.a.Item,{name:"customerList",rules:[{required:!0}],help:!1,children:Object(ke.jsx)(ye.a,{mode:"multiple",allowClear:!0,filterOption:function(e,n){if(!n)return!1;var t=n.children;return!!t&&-1!==t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())},disabled:-1!==F,children:a.map((function(e){var n=e.index,t=e.name;return Object(ke.jsx)(Ze,{value:n,children:t},n)}))})})}):-1===o&&t===U?Object(ke.jsx)(w.a,{children:Object(ke.jsx)(w.a.Item,{children:Object(ke.jsx)(O.a,{onClick:T,disabled:-1!==F,children:Object(ke.jsx)(I.a,{})})})}):-1===o&&t===Y?null:F===o&&t===ne?Object(ke.jsx)(w.a,{form:b,children:Object(ke.jsx)(w.a.Item,{name:"pkgIndexNew",children:Object(ke.jsx)(ye.a,{children:c.map((function(e){var n,t,i=e.index,c=e.name,a=e.lineupIndex,d=-1===a?de:null!==(n=null===(t=r.find((function(e){return e.index===a})))||void 0===t?void 0:t.name)&&void 0!==n?n:oe;return Object(ke.jsxs)(Ze,{value:i,children:[c," ",Object(ke.jsx)(x.a,{children:d})]},i)}))})})}):F===o&&t===Q?Object(ke.jsx)(w.a,{form:b,children:Object(ke.jsx)(w.a.Item,{name:"customerIndexListNew",rules:[{required:!0}],help:!1,children:Object(ke.jsx)(ye.a,{mode:"multiple",allowClear:!0,filterOption:function(e,n){if(!n)return!1;var t=n.children;return!!t&&-1!==t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())},children:a.map((function(e){var n=e.index,t=e.name;return Object(ke.jsx)(Ze,{value:n,children:t},n)}))})})}):F===o&&t===U?Object(ke.jsx)(w.a,{form:b,children:Object(ke.jsxs)(w.a.Item,{children:[Object(ke.jsx)(O.a,{onClick:D,children:Object(ke.jsx)(g.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return N(-1)},children:Object(ke.jsx)(L.a,{})})]})}):t===ne?Object(ke.jsxs)(ke.Fragment,{children:[u," ",Object(ke.jsx)(x.a,{children:f})]}):t===Q?l.map((function(e){var n=a.find((function(n){return n.index===e}));return n&&Object(ke.jsx)(x.a,{children:n.name},n.index)})).filter((function(e){return!!e})):t===U?Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(O.a,{onClick:function(){return function(e){var n=A.find((function(n){return n.index===e}));if(n){var t=n.pkgIndex,i=n.customerIndexList;c.find((function(e){return e.index===t}))&&(b.setFieldsValue({pkgIndexNew:t,customerIndexListNew:i}),N(e))}}(o)},children:Object(ke.jsx)(k.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return function(e){var n=A.findIndex((function(n){return n.index===e}));if(-1!==n){var t=[].concat(Object(d.a)(A.slice(0,n)),Object(d.a)(A.slice(n+1)));j(t)}}(o)},children:Object(ke.jsx)(C.a,{})})]}):t===Y?Object(ke.jsx)(De.a,{style:{cursor:"grab"}}):i})}}},expandable:{expandedRowRender:function(e){var n=e.key;return Object(ke.jsx)("td",{colSpan:H.length+1,children:Object(ke.jsx)(Ye,{customerList:a,pkgList:c,releaseIndex:n,versionIndex:l,versionList:u,onChange:function(e){return B(n,e)}})})},rowExpandable:function(e){return-1!==e.key}},pagination:!1,size:"small"}),G?Object(ke.jsxs)(Je.b,{style:{backgroundColor:"#e0e0e07f",border:"1px solid #e9e9e9",display:"flex",alignItems:"center",paddingLeft:30},children:[M," ",Object(ke.jsx)(x.a,{children:X})]}):null]})}var en=ye.a.Option;function nn(e){var n,t=e.versionIndex,r=e.versionList,c=e.lineupList,a=e.usedChangeIndexWithVersionIndexList,s=e.onChange,u=Object(P.useForm)(),l=Object(o.a)(u,1)[0],j=Object(i.useState)(-1),x=Object(o.a)(j,2),f=x[0],b=x[1];Object(i.useEffect)((function(){b(-1)}),[t,r,c]);var v=r.find((function(e){return e.index===t})),h=null!==(n=null===v||void 0===v?void 0:v.changeList)&&void 0!==n?n:[],F=[{key:X,dataIndex:X,title:xe,width:"25%"},{key:M,dataIndex:M,title:le,width:"25%"},{key:G,dataIndex:G,title:ue,width:"25%"},{key:$,dataIndex:$,title:fe,width:"12.5%"},{key:U,dataIndex:U,title:se,width:"12.5%"}].map((function(e){var n=e.dataIndex;return Object(p.a)(Object(p.a)({},e),{},{onCell:function(e){return{record:e,dataIndex:n}}})}));function q(){l.validateFields([z,A]).then((function(){var e=l.getFieldsValue([z,V,N,A]),n=e.description,t=e.beforeChange,i=e.afterChange,r=e.lineup,c=pe(h.map((function(e){return e.index}))),a=[].concat(Object(d.a)(h),[{index:c,description:n,beforeChange:t,afterChange:i,lineupIndex:r}]);s(a),l.setFieldsValue({description:"",beforeChange:"",afterChange:"",lineup:-1})})).catch((function(e){console.error(e)}))}function T(){l.validateFields([R,H]).then((function(){var e=l.getFieldsValue([R,E,S,H]),n=e.descriptionNew,t=e.beforeChangeNew,i=e.afterChangeNew,r=e.lineupNew,c=h.findIndex((function(e){return e.index===f}));if(-1!==c){var a=[].concat(Object(d.a)(h.slice(0,c)),[{index:f,description:n,beforeChange:t,afterChange:i,lineupIndex:r}],Object(d.a)(h.slice(c+1)));s(a),b(-1)}})).catch((function(e){console.error(e)}))}var B=[{key:-1}].concat(Object(d.a)(h.map((function(e){return{key:e.index,description:e.description,beforeChange:e.beforeChange,afterChange:e.afterChange,lineup:e.lineupIndex}}))));return Object(ke.jsx)(y.a,{columns:F,dataSource:B,components:{body:{cell:function(e){var n,i,r=e.record,o=e.dataIndex,u=e.children,j=Object(m.a)(e,["record","dataIndex","children"]),x=r.key,v=r.lineup;return Object(ke.jsx)("td",Object(p.a)(Object(p.a)({},j),{},{style:{verticalAlign:"top"},children:-1===x&&o===X?Object(ke.jsx)(w.a,{form:l,children:Object(ke.jsx)(w.a.Item,{name:z,rules:[{required:!0}],help:!1,children:Object(ke.jsx)(_e.a,{autoSize:!0,disabled:-1!==f})})}):-1===x&&o===M?Object(ke.jsx)(w.a,{form:l,children:Object(ke.jsx)(w.a.Item,{name:V,help:!1,children:Object(ke.jsx)(_e.a,{autoSize:!0,disabled:-1!==f})})}):-1===x&&o===G?Object(ke.jsx)(w.a,{form:l,children:Object(ke.jsx)(w.a.Item,{name:N,help:!1,children:Object(ke.jsx)(_e.a,{autoSize:!0,disabled:-1!==f})})}):-1===x&&o===$?Object(ke.jsx)(w.a,{form:l,children:Object(ke.jsx)(w.a.Item,{name:A,initialValue:-1,children:Object(ke.jsxs)(ye.a,{disabled:-1!==f,children:[Object(ke.jsx)(en,{value:-1,children:de},-1),c.map((function(e){var n=e.index,t=e.name;return Object(ke.jsx)(en,{value:n,children:t},n)}))]})})}):-1===x&&o===U?Object(ke.jsx)(w.a,{children:Object(ke.jsx)(w.a.Item,{children:Object(ke.jsx)(O.a,{onClick:q,disabled:-1!==f,children:Object(ke.jsx)(I.a,{})})})}):f===x&&o===X?Object(ke.jsx)(w.a,{form:l,children:Object(ke.jsx)(w.a.Item,{name:R,rules:[{required:!0}],help:!1,children:Object(ke.jsx)(_e.a,{autoSize:!0})})}):f===x&&o===M?Object(ke.jsx)(w.a,{form:l,children:Object(ke.jsx)(w.a.Item,{name:E,help:!1,children:Object(ke.jsx)(_e.a,{autoSize:!0})})}):f===x&&o===G?Object(ke.jsx)(w.a,{form:l,children:Object(ke.jsx)(w.a.Item,{name:S,help:!1,children:Object(ke.jsx)(_e.a,{autoSize:!0})})}):f===x&&o===$?Object(ke.jsx)(w.a,{form:l,children:Object(ke.jsx)(w.a.Item,{name:H,children:Object(ke.jsxs)(ye.a,{children:[Object(ke.jsx)(en,{value:-1,children:de},-1),c.map((function(e){var n=e.index,t=e.name;return Object(ke.jsx)(en,{value:n,children:t},n)}))]})})}):f===x&&o===U?Object(ke.jsx)(w.a,{children:Object(ke.jsxs)(w.a.Item,{children:[Object(ke.jsx)(O.a,{onClick:T,icon:Object(ke.jsx)(g.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return b(-1)},icon:Object(ke.jsx)(L.a,{})})]})}):o===X||o===M||o===G?Object(ke.jsx)(_e.a,{value:u[1],autoSize:!0,style:{border:"none "}}):o===$?-1===v?de:null!==(n=null===(i=c.find((function(e){return e.index===v})))||void 0===i?void 0:i.name)&&void 0!==n?n:oe:o===U?Object(ke.jsx)(w.a,{children:Object(ke.jsxs)(w.a.Item,{children:[Object(ke.jsx)(O.a,{onClick:function(){return function(e){var n=h.find((function(n){return n.index===e}));if(n){var t=n.description,i=n.beforeChange,r=n.afterChange,c=n.lineupIndex;l.setFieldsValue({descriptionNew:t,beforeChangeNew:i,afterChangeNew:r,lineupNew:c}),b(e)}}(x)},icon:Object(ke.jsx)(k.a,{})}),Object(ke.jsx)(O.a,{onClick:function(){return function(e){var n=h.findIndex((function(n){return n.index===e})),t=[].concat(Object(d.a)(h.slice(0,n)),Object(d.a)(h.slice(n+1)));s(t)}(x)},icon:Object(ke.jsx)(C.a,{}),disabled:!!a.find((function(e){return e.versionIndex===t&&e.changeIndex===x}))})]})}):u}))}}},pagination:!1,size:"small"})}var tn=[],rn=[],cn=[],an=[],dn=s.a.Panel;var on=function(){var e,n=Object(i.useState)(an),t=Object(o.a)(n,2),r=t[0],c=t[1],a=Object(i.useState)(-1),m=Object(o.a)(a,2),p=m[0],I=m[1],g=Object(i.useState)(rn),L=Object(o.a)(g,2),k=L[0],C=L[1],y=Object(i.useState)(cn),w=Object(o.a)(y,2),F=w[0],P=w[1],N=Object(i.useState)(tn),S=Object(o.a)(N,2),V=S[0],E=S[1],q=Object(i.useState)(!1),z=Object(o.a)(q,2),R=z[0],A=z[1],H=Object(i.useState)(""),T=Object(o.a)(H,2),B=T[0],D=T[1],J=Object(he.uniqWith)(r.reduce((function(e,n){var t=n.releaseList.reduce((function(e,n){var t=n.customerIndexListPerChangeList;return[].concat(Object(d.a)(e),Object(d.a)(t.filter((function(e){var n=e.customerIndexList;return n&&n.length})).map((function(e){return{versionIndex:e.versionIndex,changeIndex:e.changeIndex}}))))}),[]);return[].concat(Object(d.a)(e),Object(d.a)(t))}),[]),(function(e,n){return e.versionIndex===n.versionIndex&&e.changeIndex===n.changeIndex})),K=Object(he.uniq)([].concat(Object(d.a)(r.reduce((function(e,n){var t=n.changeList;return[].concat(Object(d.a)(e),Object(d.a)(t.map((function(e){return e.lineupIndex}))))}),[])),Object(d.a)(F.map((function(e){return e.lineupIndex}))))),W=Object(he.uniq)(r.reduce((function(e,n){var t=n.releaseList;return[].concat(Object(d.a)(e),Object(d.a)(t.map((function(e){return e.pkgIndex}))))}),[])),U=Object(he.uniq)(r.reduce((function(e,n){var t=n.releaseList;return[].concat(Object(d.a)(e),Object(d.a)(t.reduce((function(e,n){var t=n.customerIndexList,i=n.customerIndexListPerChangeList;return[].concat(Object(d.a)(e),Object(d.a)(t),Object(d.a)(i.reduce((function(e,n){var t=n.customerIndexList;return[].concat(Object(d.a)(e),Object(d.a)(t))}),[])))}),[])))}),[])),G=r.find((function(e){return e.index===p})),M=G&&-1!==G.indexPrev?null!==(e=r.find((function(e){return e.index===G.indexPrev})))&&void 0!==e?e:-1:void 0;return Object(ke.jsxs)("div",{className:"App",children:[Object(ke.jsx)(Be,{customerList:V,lineupList:k,pkgList:F,versionList:r,onNew:function(){I(-1),E([]),C([]),P([]),c([])},onLoad:function(e){var n=e.customerList,t=e.lineupList,i=e.pkgList,r=e.versionList;I(-1),E(n),C(t),P(i),c(r)}}),Object(ke.jsx)(u.a,{children:Object(ke.jsx)(l.a,{span:16,offset:4,children:Object(ke.jsxs)(j.a,{defaultActiveKey:Z,children:[Object(ke.jsxs)(j.a.TabPane,{tab:"History",children:[Object(ke.jsx)(Ne.a,{level:2,children:"History"}),Object(ke.jsx)(s.a,{defaultActiveKey:[ce],children:Object(ke.jsx)(dn,{header:"Versions",children:Object(ke.jsx)(ze,{versionList:r,onChange:function(e){e.find((function(e){return e.index===p}))||I(-1),c(e)},onPublish:function(e){var n=function(e,n,t,i,r){if(!function(e,n){var t=e.find((function(e){return e.index===n}));if(!t)return!1;for(var i=t,r=i,c=r.index,a=r.indexPrev,d=t,o=d,s=o.index,u=o.indexPrev;i||d;){if(!(i=e.find((function(e){return e.index===a}))))return!1;var l=i;if(c=l.index,a=l.indexPrev,!(d=e.find((function(e){return e.index===u}))))return!1;var j=d;if(s=j.index,u=j.indexPrev,!(d=e.find((function(e){return e.index===u}))))return!1;var x=d;if(s=x.index,u=x.indexPrev,c===s)return!0}}(e,n)){var c=[];r.forEach((function(r){c.push({customerIndexList:[r.index],releaseHistory:ge(e,n,t,i,r)})}));for(var a=c.length-1;a>=0;a-=1)for(var o=c[a],s=o.customerIndexList,u=o.releaseHistory,l=a-1;l>=0;l-=1){var j=c[l],x=j.customerIndexList;if(u===j.releaseHistory){x.push.apply(x,Object(d.a)(s)),c.splice(a,1);break}}return c.filter((function(e){return e.releaseHistory})).map((function(e){var n,t,i=e.customerIndexList,c=e.releaseHistory,a=(n=r,t=i,n.filter((function(e){return t.includes(e.index)})).map((function(e){return e.name}))).join(", ");return"<".concat(a,">\n").concat(Ie(c),"\n</").concat(a,">")})).join("\n")}}(r,e,k,F,V);D(null!==n&&void 0!==n?n:oe),A(!0)},onSelect:function(e){I(e)}})},ce)}),G?Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(Ne.a,{level:3,children:G.name}),M?Object(ke.jsxs)(ke.Fragment,{children:["Previous"," ",Object(ke.jsx)(x.a,{children:-1===M?oe:M.name})]}):null,Object(ke.jsxs)(f.b,{direction:"vertical",style:{width:"100%"},children:[Object(ke.jsx)(s.a,{defaultActiveKey:[_],children:Object(ke.jsx)(dn,{header:"Changes",children:Object(ke.jsx)(nn,{versionIndex:p,versionList:r,lineupList:k,usedChangeIndexWithVersionIndexList:J,onChange:function(e){var n=r.findIndex((function(e){return e.index===p}));if(-1!==n){var t=r[n];t.changeList=e;var i=[].concat(Object(d.a)(r.slice(0,n)),[t],Object(d.a)(r.slice(n+1)));c(i)}}})},_)}),Object(ke.jsx)(s.a,{defaultActiveKey:[ie],children:Object(ke.jsx)(dn,{header:"Releases",children:Object(ke.jsx)($e,{lineupList:k,pkgList:F,customerList:V,usedPkgIndexList:W,versionList:r,versionIndex:p,onChange:function(e){var n=r.findIndex((function(e){return e.index===p}));if(-1!==n){var t=r[n];t.releaseList=e;var i=[].concat(Object(d.a)(r.slice(0,n)),[t],Object(d.a)(r.slice(n+1)));c(i)}}})},ie)})]})]}):null]},Z),Object(ke.jsxs)(j.a.TabPane,{tab:je,children:[Object(ke.jsx)(Ne.a,{level:2,children:"Customers"}),Object(ke.jsx)(Ce,{title:" Customer",enumList:V,onChange:E,usedIndexList:U})]},Q),Object(ke.jsxs)(j.a.TabPane,{tab:"Lineups",children:[Object(ke.jsx)(Ne.a,{level:2,children:"Lineups"}),Object(ke.jsx)(Ce,{title:fe,enumList:k,onChange:C,usedIndexList:K})]},"lineups"),Object(ke.jsxs)(j.a.TabPane,{tab:"Packages",children:[Object(ke.jsx)(Ne.a,{level:2,children:"Packages"}),Object(ke.jsx)(Fe,{pkgList:F,lineupList:k,onChange:P,usedPkgIndexList:W})]},"packages")]})})}),Object(ke.jsx)(u.a,{style:{marginTop:"1em"},children:Object(ke.jsx)(l.a,{span:24,style:{display:"flex",justifyContent:"center"},children:Object(ke.jsx)(Ve.a,{href:"https://github.com/gsongsong/rhm",target:"_blank",rel:"noreferrer",children:Object(ke.jsx)(v.a,{})})})}),Object(ke.jsx)(b.a,{title:"Release history",footer:Object(ke.jsxs)(O.a,{onClick:function(){return navigator.clipboard.writeText(B)},children:[Object(ke.jsx)(h.a,{}),"Copy to clipboard"]}),visible:R,onCancel:function(){return A(!1)},width:960,children:Object(ke.jsx)(_e.a,{value:B,cols:80,autoSize:!0})})]})},sn=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,473)).then((function(n){var t=n.getCLS,i=n.getFID,r=n.getFCP,c=n.getLCP,a=n.getTTFB;t(e),i(e),r(e),c(e),a(e)}))};a.a.render(Object(ke.jsx)(r.a.StrictMode,{children:Object(ke.jsx)(on,{})}),document.getElementById("root")),sn()}},[[451,1,2]]]);
//# sourceMappingURL=main.bc4bc34d.chunk.js.map